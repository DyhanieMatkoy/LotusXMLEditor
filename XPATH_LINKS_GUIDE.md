# XPath Links - Руководство пользователя

## Описание

Механизм XPath Links позволяет сохранять ссылки на узлы XML-документа и быстро переходить к ним. Это полезно для навигации по большим XML-файлам и работы с часто используемыми элементами.

## Новая вкладка "Links"

В нижней панели добавлена новая вкладка **"Links"**, которая содержит текстовое поле для хранения XPath-ссылок. Каждая ссылка размещается на отдельной строке.

## Горячие клавиши

### Ctrl+F11 - Копировать XPath текущей позиции

1. Установите курсор на нужный элемент XML в редакторе
2. Нажмите **Ctrl+F11**
3. XPath текущего элемента будет добавлен в новую строку на вкладке "Links"
4. Нижняя панель автоматически откроется и переключится на вкладку "Links"

**Пример:**
```xml
<root>
    <parent id="1">
        <child name="first">Value 1</child>  <!-- Курсор здесь -->
    </parent>
</root>
```

После нажатия Ctrl+F11 в Links добавится: `/root[1]/parent[1]/child[1]`

### F12 - Переход по ссылке

1. Откройте вкладку "Links" в нижней панели
2. Установите курсор на строку с нужным XPath
3. Нажмите **F12**
4. Редактор перейдет к соответствующему элементу
5. Если дерево XML открыто, элемент будет выделен и в дереве

## Использование через меню

Функции также доступны через меню **Edit**:
- **Copy XPath Link** (Ctrl+F11)
- **Navigate to XPath Link** (F12)

## Примеры использования

### Пример 1: Навигация по сложной структуре

```xml
<Configuration>
    <Database>
        <Connection>
            <Server>localhost</Server>
            <Port>5432</Port>
        </Connection>
    </Database>
    <Application>
        <Settings>
            <Timeout>30</Timeout>
        </Settings>
    </Application>
</Configuration>
```

1. Поставьте курсор на `<Server>` и нажмите Ctrl+F11
2. Поставьте курсор на `<Timeout>` и нажмите Ctrl+F11
3. Теперь в Links у вас есть две ссылки для быстрого перехода

### Пример 2: Работа с повторяющимися элементами

```xml
<Orders>
    <Order id="1">
        <Item>Product A</Item>
    </Order>
    <Order id="2">
        <Item>Product B</Item>
    </Order>
    <Order id="3">
        <Item>Product C</Item>
    </Order>
</Orders>
```

Сохраните XPath для каждого Order, чтобы быстро переключаться между ними:
- `/Orders[1]/Order[1]`
- `/Orders[1]/Order[2]`
- `/Orders[1]/Order[3]`

## Формат XPath

Система использует упрощенный формат XPath с индексами:
- `/root[1]` - корневой элемент
- `/root[1]/parent[2]` - второй элемент parent
- `/root[1]/parent[1]/child[3]` - третий элемент child

Индексы начинаются с 1 (как в стандартном XPath).

## Советы

1. **Организация ссылок**: Вы можете добавлять комментарии в Links, начиная строку с `#`:
   ```
   # Настройки базы данных
   /Configuration[1]/Database[1]/Connection[1]
   
   # Настройки приложения
   /Configuration[1]/Application[1]/Settings[1]
   ```

2. **Редактирование ссылок**: Вы можете вручную редактировать XPath в текстовом поле Links

3. **Сохранение ссылок**: Содержимое вкладки Links можно скопировать и сохранить в отдельный файл для повторного использования

4. **Быстрая навигация**: Используйте стрелки вверх/вниз для перемещения между ссылками, затем F12 для перехода

## Устранение неполадок

**Проблема**: XPath не копируется
- **Решение**: Убедитесь, что курсор находится на строке с XML-элементом, а не на пустой строке или комментарии

**Проблема**: Переход по ссылке не работает
- **Решение**: Проверьте, что XPath корректен и соответствует структуре текущего документа

**Проблема**: Элемент не найден
- **Решение**: Структура документа могла измениться. Обновите XPath, скопировав его заново с помощью Ctrl+F11

## Интеграция с другими функциями

- **Закладки (F2)**: Используйте закладки для временных меток, а Links - для постоянных ссылок на структуру
- **Поиск (Ctrl+F)**: Найдите элемент через поиск, затем сохраните его XPath с помощью Ctrl+F11
- **Дерево XML**: Выбор элемента в дереве синхронизируется с редактором, что упрощает копирование XPath

## Технические детали

- XPath вычисляется на основе текущей позиции курсора в редакторе
- Система учитывает индексы для элементов с одинаковыми именами
- Навигация работает даже если дерево XML не построено
- Ссылки хранятся только в текущей сессии (не сохраняются при закрытии файла)
