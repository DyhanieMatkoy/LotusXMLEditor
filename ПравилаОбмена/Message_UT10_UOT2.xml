<?xml version="1.0" encoding="UTF-8"?>
<ФайлОбмена ВерсияФормата="3.1" ДатаВыгрузки="2026-02-11T13:35:17" ИмяКонфигурацииИсточника="ФедеральнаяКомпания" ИмяКонфигурацииПриемника="УправлениеТорговлей" ИдПравилКонвертации="c39ef093-3f9d-43f7-a84a-4880f5d9c00e">
<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>c39ef093-3f9d-43f7-a84a-4880f5d9c00e</Ид>
	<Наименование>UT10 --&gt; UOT</Наименование>
	<ДатаВремяСоздания>2026-01-25T23:36:44</ДатаВремяСоздания>
	<Источник>ФедеральнаяКомпания</Источник>
	<Приемник>УправлениеТорговлей</Приемник>
	<ПослеПолученияИнформацииОбУзлахОбмена>ПКО_ЗаказКлиента = Правила["ЗаказКлиента"];
тзПоискаТовары = ПКО_ЗаказКлиента.ПоискПоТабличнымЧастям;

МассивКлючевыхПолейПоиска = Новый Массив;
МассивКлючевыхПолейПоиска.Добавить("КодСтроки");
КлючевыеПоляПоиска = СтрСоединить(МассивКлючевыхПолейПоиска, ",");

СтрокаТЗ = тзПоискаТовары.Добавить();
СтрокаТЗ.ИмяЭлемента = "ТабличнаяЧасть.Товары";
СтрокаТЗ.МассивКлючевыхПолейПоиска = МассивКлючевыхПолейПоиска;
СтрокаТЗ.КлючевыеПоляПоиска = КлючевыеПоляПоиска;
СтрокаТЗ.Валидное = истина;</ПослеПолученияИнформацииОбУзлахОбмена>
	<ПослеЗагрузкиПараметров>//Параметры.Вставить("мЗаказовВДоставке", Новый Массив);

сооткд_МаркетПлейсы = новый Соответствие;
Запрос = Новый Запрос(
"выбрать * из регистрСведений.кд_МаркетПлейсы как т");
выборка = Запрос.Выполнить().Выбрать();
Пока Выборка.Следующий() Цикл
	сооткд_МаркетПлейсы.вставить(Выборка.МаркетПлейс, Новый Структура("Контрагент, Договор", Выборка.Контрагент, Выборка.Договор));
КонецЦикла;
Параметры.Вставить("сооткд_МаркетПлейсы",сооткд_МаркетПлейсы);</ПослеЗагрузкиПараметров>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Правило>
			<Код>ЗаказКлиента</Код>
			<ПриЗагрузке>СохранятьТовары = Истина;</ПриЗагрузке>
			<ПослеЗагрузки>
ВерсионированиеОбъектов.кд_ЗаписатьВерсиюОбъекта(Объект);

Если ОбъектНайден Тогда //Глазунов

	//Если Объект.кд_СтатусЗаказа = Перечисления.кд_СтатусыЗаказов.ВДоставке Или Объект.кд_СтатусЗаказа = Перечисления.кд_СтатусыЗаказов.Отгрузка Тогда 
	попытка
	Если ПараметрыОбъекта["СоздаватьПередачуНаКомиссию"] Тогда	
		Выполнить(Алгоритмы.СоздатьПередачуНаКомиссию);
	КонецЕсли;
	Исключение
	КонецПопытки;
КонецЕсли;</ПослеЗагрузки>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>ДокументСсылка.ЗаказПокупателя</Источник>
			<Приемник>ДокументСсылка.ЗаказКлиента</Приемник>
			<ПоискПоТабличнымЧастям>ТабличнаяЧасть.Товары:КодСтроки,Номенклатура,Количество,КоличествоУпаковок</ПоискПоТабличнымЧастям>
			<ПоляТаблицы>ДатаОтгрузки,Комментарий,кд_СтатусЗаказа,ДополнительнаяИнформация</ПоляТаблицы>
		</Правило>
		<Правило>
			<Код>ПриобретениеТоваровУслуг</Код>
			<ПослеЗагрузки>Если ОбъектНайден Тогда
	ИД = Ссылка.УникальныйИдентификатор();
Иначе
	ИД = Объект.ПолучитьСсылкуНового().УникальныйИдентификатор();
КонецЕсли;
ЗаказКлиента = Документы.ЗаказКлиента.ПолучитьСсылку(ИД);
Склад = ЗаказКлиента.Склад;

Объект.кд_ЗаказКлиента = ЗаказКлиента;

мСтрокУдалить = Новый Массив;
Для каждого СтрокаТЧ из Объект.Товары Цикл
	Если СтрокаТЧ.Номенклатура.ТипНоменклатуры = Перечисления.ТипыНоменклатуры.Услуга Тогда
		мСтрокУдалить.Добавить(СтрокаТЧ);
	КонецЕсли;
КонецЦикла;
Для каждого СтрокаТЧ из мСтрокУдалить Цикл
	Объект.Товары.Удалить(СтрокаТЧ);
КонецЦикла;

Если не ПараметрыОбъекта = Неопределено и не ПараметрыОбъекта["Услуги"] = неопределено Тогда
	ЧтениеJSON = Новый ЧтениеJSON;
	ЧтениеJSON.УстановитьСтроку(ПараметрыОбъекта["Услуги"]);  		
	стрУслуги = ПрочитатьJSON(ЧтениеJSON);
	мУслуги = стрУслуги.Услуги;
	Для каждого строкаУслуги из мУслуги Цикл
		номУслуга = Справочники.Номенклатура.НайтиПоКоду(строкаУслуги.НоменклатураКод, Истина);
		Если ЗначениеЗаполнено(номУслуга) Тогда
			СтрокаТЧ = Объект.Товары.Добавить();
			СтрокаТЧ.Номенклатура = номУслуга;
			перСтавкаНДС = ?(ЗначениеЗаполнено(строкаУслуги.СтавкаНДС), Перечисления.СтавкиНДС[строкаУслуги.СтавкаНДС], Перечисления.СтавкиНДС.НДС20);
			СтрокаТЧ.СтавкаНДС = УчетНДСЛокализация.СтавкаНДСПоПеречислению(перСтавкаНДС);
			СтрокаТЧ.Количество = строкаУслуги.Количество;
			СтрокаТЧ.КоличествоУпаковок = строкаУслуги.Количество;
			СтрокаТЧ.Цена = строкаУслуги.Цена;
			СтрокаТЧ.Сумма = строкаУслуги.Сумма;
			СтрокаТЧ.СуммаСНДС = строкаУслуги.Сумма;
			СтрокаТЧ.СуммаНДС = строкаУслуги.СуммаНДС;
			СтрокаТЧ.СуммаВзаиморасчетов = строкаУслуги.Сумма;
			СтрокаТЧ.СуммаНДСВзаиморасчетов = строкаУслуги.СуммаНДС;
		КонецЕсли;
	КонецЦикла;
КонецЕсли;

Для каждого СтрокаТЧ из Объект.Товары Цикл
	СтрокаТЧ.Склад = Склад;
КонецЦикла;

Объект.Склад = Склад;
Объект.Партнер = Объект.Контрагент.Партнер;
Объект.КурсЗнаменатель = 1;
Объект.КурсЧислитель = 1;
Объект.НалогообложениеНДС = перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;
Объект.ПорядокРасчетов = Объект.Договор.ПорядокРасчетов;
Объект.Согласован = Истина;
Объект.СуммаВзаиморасчетов = Объект.Товары.Итог("СуммаВзаиморасчетов");
Объект.СуммаДокумента = Объект.Товары.Итог("СуммаСНДС");
Объект.ЦенаВключаетНДС = Истина;
Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаУПоставщика;

Объект.ВариантПриемкиТоваров = перечисления.ВариантыПриемкиТоваров.РазделенаПоЗаказамИНакладным;
Объект.ЗакупкаПодДеятельность = ЗаказКлиента.НалогообложениеНДС;//перечисления.ТипыНалогообложенияНДС.ПродажаОблагаетсяНДС;
//Объект.Комментарий = СокрЛП(ЗаказКлиента);

ВерсионированиеОбъектов.кд_ЗаписатьВерсиюОбъекта(Объект);
Объект.Записать(РежимЗаписиДокумента.Проведение);

//делаем С/Ф

//создание с/ф перенес в обработчик поступления_после записи

Если ложь тогда

     	Запрос = Новый Запрос(
	"
	|Выбрать первые 1 т.ссылка из Документ.СчетФактураПолученный.ДокументыОснования как т где т.ДокументОснование = &amp;ДокОснование
	|");
		запрос.УстановитьПараметр("ДокОснование", Объект.Ссылка);
		Выборка = Запрос.Выполнить().Выбрать();
		
		Если выборка.Следующий() тогда
			СФак = Выборка.Ссылка.ПолучитьОбъект();			
		Иначе
			СФак = документы.СчетФактураПолученный.СоздатьДокумент();
			СФак.Номер = ПараметрыОбъекта["НомерСФ"];
			СФак.Дата = ПараметрыОбъекта["ДатаСФ"];
            СФак.ДатаСоставления = ПараметрыОбъекта["ДатаСФ"];
			СФак.Контрагент = Объект.Контрагент;
			СФак.Партнер = Объект.Партнер;
			СФак.Договор = Объект.Договор;
			СФак.Организация = Объект.Организация;
			СФак.Склад = Объект.Склад;
			СФак.КодВидаОперации = "01";
			СФак.Валюта = справочники.Валюты.НайтиПоКоду("643");
			СФакДО = СФак.ДокументыОснования.ДОбавить();
			СФакДО.ДокументОснование = Объект.Ссылка; 
			СФакДО.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаУПоставщика;     
			СФакДО.Сумма = Объект.СуммаДокумента; 
			СФакДО.СуммаНДС = Объект.Товары.Итог("СуммаНДС");
		КонецЕсли;

            СФак.Записать(РежимЗаписиДокумента.Проведение);
			//Если Объект.Проведен тогда
			//	СФак.Записать(РежимЗаписиДокумента.Проведение);		
			//Иначе 
			//	СФак.Записать(РежимЗаписиДокумента.ОтменаПроведения);	
			//КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
			<Источник>ДокументСсылка.ЗаказПокупателя</Источник>
			<Приемник>ДокументСсылка.ПриобретениеТоваровУслуг</Приемник>
			<ПоискПоТабличнымЧастям>ТабличнаяЧасть.Товары:Номенклатура,Количество,КоличествоУпаковок,СтавкаНДС,Сумма,СуммаНДС,Цена,СуммаВзаиморасчетов,СуммаНДСВзаиморасчетов,СуммаСНДС
ТабличнаяЧасть.ШтрихкодыУпаковок:ЗначениеШтрихкода,ШтрихкодУпаковки</ПоискПоТабличнымЧастям>
			<ПоляТаблицы>Дата,Организация,Контрагент,ФормаОплаты,Валюта,ВалютаВзаиморасчетов,Договор,Проведен,НомерВходящегоДокумента,ДатаВходящегоДокумента,ДатаПоступления,НаименованиеВходящегоДокумента,Комментарий</ПоляТаблицы>
		</Правило>
		<Правило>
			<Код>СтавкиНДС</Код>
			<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
			<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
		</Правило>
		<Правило>
			<Код>кд_МаркетПлейсы</Код>
			<Источник>ПеречислениеСсылка.кд_МаркетПлейсы</Источник>
			<Приемник>ПеречислениеСсылка.кд_МаркетПлейсы</Приемник>
		</Правило>
		<Правило>
			<Код>кд_СтатусыЗаказов</Код>
			<Источник>ПеречислениеСсылка.кд_СтатусыЗаказов_МП</Источник>
			<Приемник>ПеречислениеСсылка.кд_СтатусыЗаказов</Приемник>
		</Правило>
		<Правило>
			<Код>ЮрФизЛицо</Код>
			<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
			<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
		</Правило>
		<Правило>
			<Код>ФормыОплаты</Код>
			<Источник>ПеречислениеСсылка.ФормаОплаты</Источник>
			<Приемник>ПеречислениеСсылка.ФормыОплаты</Приемник>
		</Правило>
		<Правило>
			<Код>ТипыУпаковок</Код>
			<Источник>ПеречислениеСсылка.ТипыУпаковок</Источник>
			<Приемник>ПеречислениеСсылка.ТипыУпаковок</Приемник>
		</Правило>
		<Правило>
			<Код>ТипыШтрихкодов</Код>
			<Источник>ПеречислениеСсылка.ТипыШтрихкодов</Источник>
			<Приемник>ПеречислениеСсылка.ТипыШтрихкодов</Приемник>
		</Правило>
		<Правило>
			<Код>Валюты</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Валюты</Источник>
			<Приемник>СправочникСсылка.Валюты</Приемник>
			<ПоляТаблицы>Код</ПоляТаблицы>
			<ПоляПоиска>Код</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Номенклатура</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Номенклатура</Источник>
			<Приемник>СправочникСсылка.Номенклатура</Приемник>
			<ПоляТаблицы>Код</ПоляТаблицы>
			<ПоляПоиска>Код</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Склады</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Склады</Источник>
			<Приемник>СправочникСсылка.Склады</Приемник>
			<ПоляТаблицы>кд_интернетНомерСклада</ПоляТаблицы>
			<ПоляПоиска>кд_интернетНомерСклада</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Контрагенты_Организации</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Контрагенты</Источник>
			<Приемник>СправочникСсылка.Организации</Приемник>
			<ПоляТаблицы>Наименование,ИНН,КПП,ЮрФизЛицо</ПоляТаблицы>
			<ПоляПоиска>ИНН,КПП,ЮрФизЛицо</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Организации_Контрагенты</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Организации</Источник>
			<Приемник>СправочникСсылка.Контрагенты</Приемник>
			<ПоляТаблицы>Наименование,ИНН,КПП,ЮрФизЛицо</ПоляТаблицы>
			<ПоляПоиска>ИНН,КПП,ЮрФизЛицо</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>ДоговорыКонтрагентов</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
			<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
			<ПоляТаблицы>ВалютаВзаиморасчетов,Организация,Наименование,Контрагент</ПоляТаблицы>
			<ПоляПоиска>Организация,Наименование,Контрагент</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>СпрСтавкиНДС</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
			<Приемник>СправочникСсылка.СтавкиНДС</Приемник>
			<ПоляТаблицы>ПеречислениеСтавкаНДС</ПоляТаблицы>
			<ПоляПоиска>ПеречислениеСтавкаНДС</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>ШтрихкодыУпаковокТоваров</Код>
			<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда
	СтрокаИменСвойствПоиска = "Номенклатура, ЗначениеШтрихкода";
ИначеЕсли НомерВариантаПоиска = 2 тогда
	со = Справочники.ШтрихкодыУпаковокТоваров.СоздатьЭлемент();
	со.ДатаУпаковки = СвойстваПоиска.Получить("ДатаУпаковки");
	со.ЗначениеШтрихкода = СвойстваПоиска.Получить("ЗначениеШтрихкода");
	со.Количество = СвойстваПоиска.Получить("Количество");
	со.Номенклатура = СвойстваПоиска.Получить("Номенклатура");
	со.НомерПартии = СвойстваПоиска.Получить("НомерПартии");
	со.СерийныйНомер = СвойстваПоиска.Получить("СерийныйНомер");
	со.ТипУпаковки = СвойстваПоиска.Получить("ТипУпаковки");
	со.ТипШтрихкода = СвойстваПоиска.Получить("ТипШтрихкода");
	со.ТипУпаковки = СвойстваПоиска.Получить("ТипУпаковки");
	со.ХешСумма = СвойстваПоиска.Получить("ХешСумма");
	со.ХешСуммаЗначенияШтрихкода = СвойстваПоиска.Получить("ХешСуммаЗначенияШтрихкода");
	со.ПометкаУдаления = СвойстваПоиска.Получить("ПометкаУдаления");
	со.ОбменДанными.Загрузка = Истина;
	сс = Справочники.ШтрихкодыУпаковокТоваров.ПолучитьСсылку(Новый УникальныйИдентификатор(СвойстваПоиска["{УникальныйИдентификатор}"]));
	со.УстановитьСсылкуНового(сс);
	со.Записать();
	СсылкаНаОбъект = со.Ссылка;
	ПрекратитьПоиск = Истина;
КонецЕсли;</ПоследовательностьПолейПоиска>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
			<Источник>СправочникСсылка.ШтрихкодыУпаковокТоваров</Источник>
			<Приемник>СправочникСсылка.ШтрихкодыУпаковокТоваров</Приемник>
			<ПоляТаблицы>ДатаУпаковки,ЗначениеШтрихкода,Количество,Номенклатура,НомерПартии,СерийныйНомер,ТипУпаковки,ТипШтрихкода,ХешСумма,ХешСуммаЗначенияШтрихкода,ПометкаУдаления</ПоляТаблицы>
			<ПоляПоиска>ДатаУпаковки,ЗначениеШтрихкода,Количество,Номенклатура,НомерПартии,СерийныйНомер,ТипУпаковки,ТипШтрихкода,ХешСумма,ХешСуммаЗначенияШтрихкода,ПометкаУдаления</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>СтатьиДвиженияДенежныхСредств</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>СправочникСсылка.СтатьиДвиженияДенежныхСредств</Источник>
			<Приемник>СправочникСсылка.СтатьиДвиженияДенежныхСредств</Приемник>
			<ПоляТаблицы>Код,ПометкаУдаления,Родитель,ЭтоГруппа,Наименование</ПоляТаблицы>
			<ПоляПоиска>ЭтоГруппа,Наименование</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>СтруктураПредприятия</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>СправочникСсылка.ПодразделенияОрганизаций</Источник>
			<Приемник>СправочникСсылка.СтруктураПредприятия</Приемник>
			<ПоляТаблицы>Код,ПометкаУдаления,Родитель,Наименование</ПоляТаблицы>
			<ПоляПоиска>Наименование</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Контрагенты</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>СправочникСсылка.Контрагенты</Источник>
			<Приемник>СправочникСсылка.Контрагенты</Приемник>
			<ПоляТаблицы>Наименование</ПоляТаблицы>
			<ПоляПоиска>Наименование</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Организации</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>СправочникСсылка.Организации</Источник>
			<Приемник>СправочникСсылка.Организации</Приемник>
			<ПоляТаблицы>Наименование</ПоляТаблицы>
			<ПоляПоиска>Наименование</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Пользователи</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>СправочникСсылка.Пользователи</Источник>
			<Приемник>СправочникСсылка.Пользователи</Приемник>
			<ПоляТаблицы>Наименование</ПоляТаблицы>
			<ПоляПоиска>Наименование</ПоляПоиска>
		</Правило>
	</ПравилаКонвертацииОбъектов>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм ИспользуетсяПриЗагрузке="true" Имя="СоздатьПередачуНаКомиссию">
			<Текст>
//стрМП = Параметры.сооткд_МаркетПлейсы.Получить(Объект.кд_МаркетПлейс);

ИД = Ссылка.УникальныйИдентификатор();
//дс = Документы.ПередачаТоваровХранителю.ПолучитьСсылку(ИД);
ЗаказКлиента = Документы.ЗаказКлиента.ПолучитьСсылку(ИД);  
//ЗаказКлиента.ПолучитьОбъект().Записать(РежимЗаписиДокумента.Проведение);

Склад = ЗаказКлиента.Склад;



     	Запрос = Новый Запрос(
	"
	|Выбрать первые 1 т.ссылка из Документ.ПередачаТоваровХранителю как т где т.кд_ЗаказКлиента = &amp;ДокОснование
	|");
		запрос.УстановитьПараметр("ДокОснование", ЗаказКлиента);
		Выборка = Запрос.Выполнить().Выбрать();
		
		Если выборка.Следующий() тогда
			до = Выборка.Ссылка.ПолучитьОбъект();
			до.ПометкаУдаления = Ложь;
			до.Товары.Очистить();
			до.ВидыЗапасов.Очистить();
		Иначе
           	до = Документы.ПередачаТоваровХранителю.СоздатьДокумент();
			до.Дата = ТекущаяДатаСеанса();
        КонецЕсли;

//Если не стрМП = Неопределено тогда
	
	//до = дс.ПолучитьОбъект();
	
	//Если ДО = Неопределено тогда
		//до = Документы.ПередачаТоваровХранителю.СоздатьДокумент();
		//до.УстановитьСсылкуНового(дс);
		//до.УстановитьСсылкуНового();
		//до.Дата = ТекущаяДатаСеанса();
	//Иначе
	//	до.ПометкаУдаления = Ложь;
	//	до.Товары.Очистить();
	//	до.ВидыЗапасов.Очистить();
	//КонецЕсли;
	   
	до.кд_ЗаказКлиента = ЗаказКлиента;
	
	до.Автор = ПараметрыСеанса.АвторизованныйПользователь;
	до.Валюта = объект.Валюта;
	до.ЗаказКлиента = ЗаказКлиента;
	до.КоэффициентПересчетаРегл = 1;
	до.Менеджер = объект.Менеджер;
	до.ПередачаПоЗаказам = Ложь;
	до.Проведен = истина;
	до.Склад = Склад;
	до.СпособДоставки = Перечисления.СпособыДоставки.Самовывоз;
	
	до.ХозяйственнаяОперация = перечисления.ХозяйственныеОперации.ПередачаНаКомиссию;
	до.Организация = ЗаказКлиента.Организация;
	до.Контрагент = ЗаказКлиента.Контрагент;
	до.Партнер = до.Контрагент.Партнер;
	до.Договор = ЗаказКлиента.Договор;
	до.Основание = "Передача на комиссию.";
	//до.Комментарий = СокрЛП(ЗаказКлиента);
	до.Комментарий = СокрЛП(ЗаказКлиента.НомерПоДаннымКлиента);
	
	до.Товары.Очистить();
	до.ВидыЗапасов.Очистить();
	для каждого СтрокаТЧ из объект.Товары Цикл
		СтрокаПТ = до.Товары.Добавить();
		ЗаполнитьЗначенияСвойств(СтрокаПТ, СтрокаТЧ);
		СтрокаПТ.ЗаказКлиента = ЗаказКлиента;
	КонецЦикла;
	
	до.ОбменДанными.Загрузка = Истина;
	до.Записать(РежимЗаписиДокумента.Запись);
	ВерсионированиеОбъектов.кд_ЗаписатьВерсиюОбъекта(до);
	
	//Если до.Проведен тогда
		СтрокаТаблицы = ДокументыДляОтложенногоПроведения().Добавить();
		СтрокаТаблицы.ДокументСсылка = до.Ссылка;
		СтрокаТаблицы.ДатаДокумента  = до.Дата;
								
		ДополнительныеСвойстваДляОтложенногоПроведения().Вставить(до.Ссылка, до.ДополнительныеСвойства);
	//КонецЕсли;
//КонецЕсли;</Текст>
		</Алгоритм>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>
<ИнформацияОТипахДанных>
	<ТипДанных Имя="СправочникСсылка.Пользователи">
		<Наименование>Строка</Наименование>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.СтруктураПредприятия">
		<Родитель>СправочникСсылка.СтруктураПредприятия</Родитель>
		<ПометкаУдаления>Булево</ПометкаУдаления>
		<Код>Строка</Код>
		<Наименование>Строка</Наименование>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.СтатьиДвиженияДенежныхСредств">
		<Родитель>СправочникСсылка.СтатьиДвиженияДенежныхСредств</Родитель>
		<ПометкаУдаления>Булево</ПометкаУдаления>
		<Код>Строка</Код>
		<Наименование>Строка</Наименование>
		<ЭтоГруппа>Булево</ЭтоГруппа>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.СтавкиНДС">
		<ПеречислениеСтавкаНДС>ПеречислениеСсылка.СтавкиНДС</ПеречислениеСтавкаНДС>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Контрагенты">
		<Наименование>Строка</Наименование>
		<ЮрФизЛицо>ПеречислениеСсылка.ЮрФизЛицо</ЮрФизЛицо>
		<КПП>Строка</КПП>
		<ИНН>Строка</ИНН>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Организации">
		<Наименование>Строка</Наименование>
		<ЮрФизЛицо>ПеречислениеСсылка.ЮрФизЛицо</ЮрФизЛицо>
		<КПП>Строка</КПП>
		<ИНН>Строка</ИНН>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.ШтрихкодыУпаковокТоваров">
		<ХешСумма>Строка</ХешСумма>
		<ХешСуммаЗначенияШтрихкода>Строка</ХешСуммаЗначенияШтрихкода>
		<НомерПартии>Строка</НомерПартии>
		<ТипШтрихкода>ПеречислениеСсылка.ТипыШтрихкодов</ТипШтрихкода>
		<Номенклатура>СправочникСсылка.Номенклатура</Номенклатура>
		<ПометкаУдаления>Булево</ПометкаУдаления>
		<ТипУпаковки>ПеречислениеСсылка.ТипыУпаковок</ТипУпаковки>
		<Количество>Число</Количество>
		<СерийныйНомер>Число</СерийныйНомер>
		<ЗначениеШтрихкода>Строка</ЗначениеШтрихкода>
		<ДатаУпаковки>Дата</ДатаУпаковки>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Склады">
		<кд_интернетНомерСклада>Строка</кд_интернетНомерСклада>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Номенклатура">
		<Код>Строка</Код>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.ДоговорыКонтрагентов">
		<Контрагент>СправочникСсылка.Контрагенты</Контрагент>
		<Наименование>Строка</Наименование>
		<ВалютаВзаиморасчетов>СправочникСсылка.Валюты</ВалютаВзаиморасчетов>
		<Организация>СправочникСсылка.Организации</Организация>
	</ТипДанных>
	<ТипДанных Имя="ДокументСсылка.ПриобретениеТоваровУслуг">
		<Комментарий>Строка</Комментарий>
		<ДатаПоступления>Дата</ДатаПоступления>
		<ДатаВходящегоДокумента>Дата</ДатаВходящегоДокумента>
		<НомерВходящегоДокумента>Строка</НомерВходящегоДокумента>
		<ШтрихкодыУпаковокТабличнаяЧасть>
			<ШтрихкодУпаковки>СправочникСсылка.ШтрихкодыУпаковокТоваров</ШтрихкодУпаковки>
			<ЗначениеШтрихкода>Строка</ЗначениеШтрихкода>
		</ШтрихкодыУпаковокТабличнаяЧасть>
		<Договор>СправочникСсылка.ДоговорыКонтрагентов</Договор>
		<Валюта>СправочникСсылка.Валюты</Валюта>
		<НаименованиеВходящегоДокумента>Строка</НаименованиеВходящегоДокумента>
		<Проведен>Булево</Проведен>
		<ФормаОплаты>ПеречислениеСсылка.ФормыОплаты</ФормаОплаты>
		<Контрагент>СправочникСсылка.Контрагенты</Контрагент>
		<ВалютаВзаиморасчетов>СправочникСсылка.Валюты</ВалютаВзаиморасчетов>
		<Организация>СправочникСсылка.Организации</Организация>
		<ТоварыТабличнаяЧасть>
			<СуммаСНДС>Число</СуммаСНДС>
			<Цена>Число</Цена>
			<СуммаНДС>Число</СуммаНДС>
			<СуммаНДСВзаиморасчетов>Число</СуммаНДСВзаиморасчетов>
			<СтавкаНДС>СправочникСсылка.СтавкиНДС</СтавкаНДС>
			<СуммаВзаиморасчетов>Число</СуммаВзаиморасчетов>
			<Сумма>Число</Сумма>
			<КоличествоУпаковок>Число</КоличествоУпаковок>
			<Количество>Число</Количество>
			<Номенклатура>СправочникСсылка.Номенклатура</Номенклатура>
		</ТоварыТабличнаяЧасть>
		<Дата>Дата</Дата>
	</ТипДанных>
	<ТипДанных Имя="ДокументСсылка.ЗаказКлиента">
		<ТоварыТабличнаяЧасть>
			<КоличествоУпаковок>Число</КоличествоУпаковок>
			<Количество>Число</Количество>
			<Номенклатура>СправочникСсылка.Номенклатура</Номенклатура>
			<КодСтроки>Число</КодСтроки>
		</ТоварыТабличнаяЧасть>
		<ДополнительнаяИнформация>Строка</ДополнительнаяИнформация>
		<кд_СтатусЗаказа>ПеречислениеСсылка.кд_СтатусыЗаказов</кд_СтатусЗаказа>
		<Комментарий>Строка</Комментарий>
		<ДатаОтгрузки>Дата</ДатаОтгрузки>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Валюты">
		<Код>Строка</Код>
	</ТипДанных>
</ИнформацияОТипахДанных>
<АлгоритмПослеЗагрузкиПараметров>//Параметры.Вставить("мЗаказовВДоставке", Новый Массив);

сооткд_МаркетПлейсы = новый Соответствие;
Запрос = Новый Запрос(
"выбрать * из регистрСведений.кд_МаркетПлейсы как т");
выборка = Запрос.Выполнить().Выбрать();
Пока Выборка.Следующий() Цикл
	сооткд_МаркетПлейсы.вставить(Выборка.МаркетПлейс, Новый Структура("Контрагент, Договор", Выборка.Контрагент, Выборка.Договор));
КонецЦикла;
Параметры.Вставить("сооткд_МаркетПлейсы",сооткд_МаркетПлейсы);</АлгоритмПослеЗагрузкиПараметров>
<ДанныеПоОбмену ПланОбмена="кд_УОТ_УТ10" Кому="UOT2" ОтКого="UT10" НомерИсходящегоСообщения="151" НомерВходящегоСообщения="1890" УдалитьРегистрациюИзменений="true"/>
<ИнформацияОРегистрацииОбъекта УникальныйИдентификаторИсточника="d92a7e91-0712-11f1-8ceb-005056a0e358" УникальныйИдентификаторПриемника="d92a7e91-0712-11f1-8ceb-005056a0e358" ТипИсточника="ДокументСсылка.ЗаказПокупателя" ТипПриемника="ДокументСсылка.ЗаказКлиента" ПустойНабор="false"/>
<ИнформацияОРегистрацииОбъекта УникальныйИдентификаторИсточника="d99c0b56-0716-11f1-8ceb-005056a0e358" УникальныйИдентификаторПриемника="d99c0b56-0716-11f1-8ceb-005056a0e358" ТипИсточника="ДокументСсылка.КорректировкаЗаказаПокупателя" ТипПриемника="ДокументСсылка.ЗаказКлиента" ПустойНабор="false"/>
</ФайлОбмена>
