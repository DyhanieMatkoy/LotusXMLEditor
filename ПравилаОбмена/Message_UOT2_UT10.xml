<?xml version="1.0" encoding="UTF-8"?>
<ФайлОбмена ВерсияФормата="3.1" ДатаВыгрузки="2026-02-11T13:24:32" ИмяКонфигурацииИсточника="УправлениеТорговлей" ВерсияКонфигурацииИсточника="11.5.25.85" ИмяКонфигурацииПриемника="ФедеральнаяКомпания" ИдПравилКонвертации="6a6f4c28-4169-4ec3-9761-33d79a688ea2">
<ПравилаОбмена>
	<ВерсияФормата>2.01</ВерсияФормата>
	<Ид>6a6f4c28-4169-4ec3-9761-33d79a688ea2</Ид>
	<Наименование>UOT --&gt; UT10 крафтовые</Наименование>
	<ДатаВремяСоздания>2026-02-11T14:04:26</ДатаВремяСоздания>
	<Источник>УправлениеТорговлей</Источник>
	<Приемник>ФедеральнаяКомпания</Приемник>
	<ПослеПолученияИнформацииОбУзлахОбмена>//ПКО_ЗаказКлиента = Правила["ЗаказКлиента"];

//тзПоискаТовары = ПКО_ЗаказКлиента.ПоискПоТабличнымЧастям;

//МассивКлючевыхПолейПоиска = Новый Массив;

//МассивКлючевыхПолейПоиска.Добавить("КодСтроки");

//КлючевыеПоляПоиска = СтрСоединить(МассивКлючевыхПолейПоиска, ",");

//СтрокаТЗ = тзПоискаТовары.Добавить();

//СтрокаТЗ.ИмяЭлемента = "ТабличнаяЧасть.Товары";

//СтрокаТЗ.МассивКлючевыхПолейПоиска = МассивКлючевыхПолейПоиска;

//СтрокаТЗ.КлючевыеПоляПоиска = КлючевыеПоляПоиска;

//СтрокаТЗ.Валидное = истина;</ПослеПолученияИнформацииОбУзлахОбмена>
	<ПослеЗагрузкиДанных>Для каждого СтрокаТЗ из Параметры.ДокументыДляОтложенногоПроведенияДоп Цикл

	СтрокаТаблицы = ДокументыДляОтложенногоПроведения().Добавить();

	ЗаполнитьЗначенияСвойств(СтрокаТаблицы, СтрокаТЗ);

КонецЦикла;

Для каждого дс из Параметры.мРТУдляУдаления Цикл

	до = дс.ПолучитьОбъект();

	Попытка

		до.УстановитьПометкуУдаления(Истина);

	Исключение

		текстОшибки = ОписаниеОшибки();

		Сообщить(дс);

		Сообщить(текстОшибки);

		ЗаписьЖурналаРегистрацииОбменДанными(текстОшибки, УровеньЖурналаРегистрации.Ошибка);

	КонецПопытки;

КонецЦикла;

Выполнить(Алгоритмы.ВыполнитьОтложенноеПроведениеДокументов);</ПослеЗагрузкиДанных>
	<ПослеЗагрузкиПараметров>Параметры.Вставить("Организация", УзелОбменаЗагрузкаДанных.Организация);

Параметры.Вставить("Контрагент", УзелОбменаЗагрузкаДанных.Контрагент);

Параметры.Вставить("ДоговорКонтрагента", УзелОбменаЗагрузкаДанных.ДоговорКонтрагента);

Параметры.Вставить("ДоговорКонтрагентаВозврат", УзелОбменаЗагрузкаДанных.ДоговорКонтрагентаВозврат);

Параметры.Вставить("ТипЦен", УзелОбменаЗагрузкаДанных.ТипЦен);

Параметры.Вставить("УслугаУпаковки", УзелОбменаЗагрузкаДанных.УслугаУпаковки);

Параметры.Вставить("ВалютаРегламентированногоУчета", Константы.ВалютаРегламентированногоУчета.Получить());

Параметры.Вставить("УзелОбменаЗагрузкаДанных", УзелОбменаЗагрузкаДанных);

Параметры.Вставить("мЗаказовКОбратнойРегистрации", Новый Массив);

Параметры.Вставить("мРТУдляУдаления", Новый Массив);

Запрос = Новый Запрос(

"выбрать т.ссылка из справочник.КаналыСбыта как т

|где т.наименование = ""КЦ""");

Выборка = Запрос.Выполнить().Выбрать();

Если Выборка.Следующий() тогда

Параметры.Вставить("КаналСбыта", выборка.Ссылка);

Иначе

Параметры.Вставить("КаналСбыта", Неопределено);

КонецЕсли;

ДокументыДляОтложенногоПроведенияДоп = Новый ТаблицаЗначений;

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ДокументОбъект"); // Поле оставлено для совместимости с предыдущими версиями

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ДокументСсылка");

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ДатаДокумента",           одОписаниеТипа("Дата"));

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ДокументПроведенУспешно", одОписаниеТипа("Булево"));

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ЭтоКоллизия", одОписаниеТипа("Число"));

Параметры.Вставить("ДокументыДляОтложенногоПроведенияДоп", ДокументыДляОтложенногоПроведенияДоп);</ПослеЗагрузкиПараметров>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Правило>
			<Код>ЗаказПокупателя</Код>
			<ПриЗагрузке>Объект.Товары.Очистить();

Объект.Услуги.Очистить();</ПриЗагрузке>
			<ПослеЗагрузки>

//Попытка //+2 отладочное 1

//	//Объект.Обменданными.Загрузка=Истина;

//	//Объект.Записать(РежимЗаписиДокумента.Запись);

//	СтрокаСообщения = "ЗкзПозлеЗагр_ "+Объект.Ссылка;

//	ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

//Исключение

//	СтрокаСообщения = "ЗкзПозлеЗагр__ "+ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());

//	ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

//КонецПопытки;



//Попытка //+2 отлдадочное2

//	Объект.Обменданными.Загрузка=Истина;

//	Объект.Записать(РежимЗаписиДокумента.Запись);

//	Объект.Обменданными.Загрузка=Ложь;

//	СтрокаСообщения = "ЗкзПозлеЗагр2_ "+Объект.Ссылка;

//	ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

//Исключение

//	СтрокаСообщения = "ЗкзПозлеЗагр2__ "+ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());

//	ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

//КонецПопытки;





//// Создаем запрос для поиска корректировок, привязанных к данному заказу

//Запрос = Новый Запрос;

//Запрос.Текст = 

//    "ВЫБРАТЬ РАЗРЕШЕННЫЕ

//    |   Корректировка.Ссылка КАК Ссылка

//    |ИЗ

//    |   Документ.КорректировкаЗаказаПокупателя КАК Корректировка

//    |ГДЕ

//    |   Корректировка.ЗаказПокупателя = &amp;ЗаказПокупателя

//    |   И Корректировка.Проведен = ИСТИНА"; // Нас интересуют только проведенные документы





//// Устанавливаем параметр запроса (ссылка на текущий заказ)

//Запрос.УстановитьПараметр("ЗаказПокупателя", Объект.Ссылка);





//Выборка = Запрос.Выполнить().Выбрать();





//Пока Выборка.Следующий() Цикл

//    

//    // ВАЖНО: 'Отменен' здесь должно быть конкретным значением перечисления или справочника.

//    // Обычно это выглядит как Перечисления.кд_СтатусыЗаказа.Отменен

//    // Замените правую часть условия на правильное значение из вашей конфигурации.

//    

//    Если Объект.кд_СтатусЗаказа = Перечисления.кд_СтатусыЗаказа.Отменен Тогда

//        

//        Попытка

//            // Получаем объект документа для изменения

//            ДокКорректировка = Выборка.Ссылка.ПолучитьОбъект();

//            

//            // Отменяем проведение

//            ДокКорректировка.Записать(РежимЗаписиДокумента.ОтменаПроведения);

//            

//            Сообщить("Отменено проведение документа: " + Строка(Выборка.Ссылка));

//        Исключение

//            Сообщить("Ошибка при отмене проведения " + Строка(Выборка.Ссылка) + ": " + ОписаниеОшибки());

//        КонецПопытки;

//        

//    КонецЕсли;

//    

//КонецЦикла;





//фрагмент из правил УОТ!

Переменная = Константы.ГраницаЗапретаИзмененияДокументов.Получить(); 



//changed+ Долгих Н. 29.12.2025 

Если Объект.Дата &lt; Переменная Тогда 

	Если ЗначениеЗаполнено(Объект.Ссылка) Тогда

		

		ТекстОшибки = "Документ находится в закрытом периоде и не будет загружен. " + СокрЛП(Ссылка);

		Сообщить(ТекстОшибки);

		ЗаписьЖурналаРегистрацииОбменДанными(ТекстОшибки, УровеньЖурналаРегистрации.Предупреждение);

	КонецЕсли;

	Отказ = Истина;  

КонецЕсли; 



Если Не Отказ  Тогда

	//changed- Долгих Н. 29.12.2025 

	

	//changed+ Долгих Н. 27.05.2025 

	ОбъектУТ10 = Неопределено;

	

	Если ЗначениеЗаполнено(Объект.Ссылка) Тогда

		

		ОбъектУТ10 = Объект.Ссылка.ПолучитьОбъект();

		

		Если Не ОбъектУТ10 = Неопределено Тогда 

			

			Если ОбъектУТ10.Дата &lt; Переменная или ОбъектУТ10.кд_СтатусЗаказа = перечисления.кд_СтатусыЗаказов_МП.Отменен Тогда

				Отказ = Истина;

			КонецЕсли;	

		КонецЕсли;

	КонецЕсли;

	//changed- Долгих Н. 27.05.2025   

	

	Выполнить(Алгоритмы.СозданиеЗаказа_п41);   

	

	текСтатусЗаказаОтменен = Истина;

	

	Если Объект.кд_СтатусЗаказа = перечисления.кд_СтатусыЗаказов_МП.Отменен Тогда

		Объект.СтатусЗаказа = перечисления.КД_СтатусыЗаказов.Отменен;

		текСтатусЗаказаОтменен = Истина;	

		

	ИначеЕсли Объект.кд_СтатусЗаказа = перечисления.кд_СтатусыЗаказов_МП.Принят Тогда

		Объект.СтатусЗаказа = перечисления.КД_СтатусыЗаказов.Принят;

		

	ИначеЕсли Объект.кд_СтатусЗаказа = перечисления.кд_СтатусыЗаказов_МП.ВДоставке 

		

		и значениезаполнено(Ссылка) Тогда

		Объект.СтатусЗаказа = перечисления.КД_СтатусыЗаказов.Выполнен;

		Параметры.мЗаказовКОбратнойРегистрации.Добавить(Ссылка); 

		

	КонецЕсли;

	Объект.ДополнительныеСвойства.Вставить("ЗаписьВРежимеОбменаДанными", Истина);

	

	ЗаписьЖурналаРегистрацииОбменДанными("33333-2", УровеньЖурналаРегистрации.Предупреждение);

	Если Объект.СтатусЗаказа = перечисления.КД_СтатусыЗаказов.Отменен Тогда  

		Если ЗначениеЗаполнено(Объект.Ссылка) Тогда //+++Костерин О.В. 24.07.2025

			//+++Костерин О.В. 24.07.2025

			//ЗАПРОС ПЕРЕНЕС В Запросы 

			Запрос = Запросы.ЗакрытияЗаказов;

			//---Костерин О.В. 24.07.2025

			Запрос.УстановитьПараметр("Заказ", Объект.Ссылка);

			Выборка = Запрос.Выполнить().Выбрать();

			Если Выборка.Следующий() Тогда

				Если Выборка.кд_СтатусЗаказа = перечисления.кд_СтатусыЗаказов_МП.Отменен

					И ЗначениеЗаполнено(Выборка.Закрытие) Тогда

					//уже отменен

					текстОшибки = "Отмена заказа невозможна - уже отменен. " + СокрЛП(Ссылка);

					Сообщить(текстОшибки);

					ЗаписьЖурналаРегистрацииОбменДанными(текстОшибки, УровеньЖурналаРегистрации.Предупреждение);

					//changed+ Долгих Н. 27.05.2025 

					Отказ = Истина;

					//changed- Долгих Н. 27.05.2025

				ИначеЕсли ЗначениеЗаполнено(Выборка.РО) Тогда

					//Нельзя отменять - все уже ушло со склада

					//через возврат

					Объект.кд_СтатусЗаказа = перечисления.кд_СтатусыЗаказов_МП.ВДоставке;

					Объект.СтатусЗаказа = перечисления.КД_СтатусыЗаказов.Выполнен;

					Параметры.мЗаказовКОбратнойРегистрации.Добавить(Ссылка);

					текстОшибки = "Отмена заказа невозможна - есть расходный ордер. " + СокрЛП(Ссылка);

					Сообщить(текстОшибки);

					ЗаписьЖурналаРегистрацииОбменДанными(текстОшибки, УровеньЖурналаРегистрации.Предупреждение);

					//changed+ Долгих Н. 27.05.2025 

					Отказ = Истина; 

					//changed- Долгих Н. 27.05.2025 

				Иначе

					//+++Костерин О.В. 24.07.2025

					//ПРЕНЕС С Алгоритмы

					РТУ = Выборка.РТУ; 

					ОбъектСсылка = Объект.Ссылка;  

					Выполнить(Алгоритмы.СоздатьЗакрытиеЗаказовПокупателей);

					//---Костерин О.В. 24.07.2025

				КонецЕсли;

			КонецЕсли;

			//+++Костерин О.В. 24.07.2025	

		Иначе  

			

			Попытка

				Объект.Записать();

				ОбъектЗаписан = Истина;

			Исключение

				ОписаниеОшибки = КраткоеПредставлениеОшибки(ИнформацияОбОшибке());

				Сообщить("Документ ""Заказ клиента"" не записан: " + ОписаниеОшибки);

				ЗаписьЖурналаРегистрацииОбменДанными(ОписаниеОшибки, УровеньЖурналаРегистрации.Предупреждение);	 

				ОбъектЗаписан = Ложь;

			КонецПопытки;

			

			Если ОбъектЗаписан Тогда

				РТУ = Неопределено;   

				ОбъектСсылка = Объект.Ссылка;

				Выполнить(Алгоритмы.СоздатьЗакрытиеЗаказовПокупателей);  

			КонецЕсли;

		КонецЕсли; 

		//---Костерин О.В. 24.07.2025

	КонецЕсли;

	

	//changed+ Долгих Н. 28.05.2025  

	Если (Не ОбъектУТ10 = Неопределено) и (Ссылка.Проведен = Истина И Ссылка.Товары.Количество()&gt;0) Тогда

		//Если ОбъектНайден = Истина и (Ссылка.Проведен = Истина И Ссылка.Товары.Количество()&gt;0) Тогда

		//Отказ = Истина;

		текСтатусЗаказа = Объект.СтатусЗаказа;

		теккд_СтатусЗаказа = Объект.кд_СтатусЗаказа;

		//Объект = Ссылка.ПолучитьОбъект();

		

		//Если не Отказ = Истина и (не ОбъектУТ10.СтатусЗаказа = текСтатусЗаказа или не ОбъектУТ10.кд_СтатусЗаказа = теккд_СтатусЗаказа) Тогда

		Если не Отказ = Истина и Объект.кд_СтатусЗаказа = перечисления.кд_СтатусыЗаказов_МП.Отменен Тогда

			

			ОбъектУТ10.СтатусЗаказа = текСтатусЗаказа;

			ОбъектУТ10.кд_СтатусЗаказа = теккд_СтатусЗаказа;

			ОбъектУТ10.ОбменДанными.Загрузка = Истина;

			ОбъектУТ10.ДополнительныеСвойства.Вставить("ЗаписьВРежимеОбменаДанными", Истина);

			ОбъектУТ10.Записать();

			Отказ = Истина;

		КонецЕсли;

		

	КонецЕСли; 

	

	//changed+ Долгих Н. 28.05.2025  

	

	Выполнить(Алгоритмы.ВременнаяОтменаПроведенияСвязаннойРеализации); //Костерин О.В. 29.07.2025  

КонецЕсли;</ПослеЗагрузки>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>ДокументСсылка.ЗаказКлиента</Источник>
			<Приемник>ДокументСсылка.ЗаказПокупателя</Приемник>
			<ПоискПоТабличнымЧастям>ТабличнаяЧасть.Товары:КодСтроки,Количество,Номенклатура,ХарактеристикаНоменклатуры,Цена</ПоискПоТабличнымЧастям>
			<ПоляТаблицы>ДатаОтгрузки,кд_МаркетПлейс,Комментарий,КомментарийКЦ,ПометкаУдаления,Проведен,ВалютаДокумента,кд_СтатусЗаказа</ПоляТаблицы>
		</Правило>
		<Правило>
			<Код>КорректировкаЗаказаПокупателя</Код>
			<ПриЗагрузке>Объект.Товары.Очистить();

Объект.Услуги.Очистить();</ПриЗагрузке>
			<ПослеЗагрузки>Попытка //+2 --- Корректировка ЗП

	//Объект.Обменданными.Загрузка=Истина;

	//Объект.Записать(РежимЗаписиДокумента.Запись);

	СтрокаСообщения = "ЗкзПозлеЗагр_ "+Объект.Ссылка;

	ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

Исключение

	СтрокаСообщения = "ЗкзПозлеЗагр__ "+ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());

	ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

КонецПопытки;

Переменная = Константы.ГраницаЗапретаИзмененияДокументов.Получить();



//СозданиеКорЗаказа41

Если не ЗначениеЗаполнено(Объект.Дата) Тогда

	Объект.Дата = ТекущаяДатаСеанса();

КонецЕсли;



Объект.Контрагент = параметры.Контрагент;

Объект.СтруктурнаяЕдиница = параметры.Организация.ОсновнойБанковскийСчет;//Справочники.БанковскиеСчета.НайтиПоРеквизиту("НомерСчета","40702810323000086672");



Объект.СуммаВключаетНДС = Истина;

Объект.УчитыватьНДС = Истина;

Объект.КратностьВзаиморасчетов = 1;

Объект.КурсВзаиморасчетов = 1;

Объект_Склад = "";//Объект.ТипЦен = текТипЦен;

Если не ПараметрыОбъекта = Неопределено ТОгда

	КодМагазинаНаСайте = ПараметрыОбъекта.Получить("кд_интернетНомерСклада");

	Если ЗначениеЗаполнено(КодМагазинаНаСайте) ТОгда

		Запрос = Новый Запрос(

		"

		|выбрать т.Подразделение, т.ОсновнойСклад из регистрСведений.СоответствиеМагазинов как т

		|где т.КодМагазинаНаСайте = &amp;КодМагазинаНаСайте и не т.Служебная = Истина

		|");

		Запрос.УстановитьПараметр("КодМагазинаНаСайте", КодМагазинаНаСайте);

		Выборка = Запрос.Выполнить().Выбрать();

		Если Выборка.Следующий() Тогда

			Объект_Подразделение = Выборка.Подразделение;

			Объект_Склад = Выборка.ОсновнойСклад;

		КонецЕсли;

	КонецЕсли;

КонецЕсли;

//+



Для каждого строкаТЧ из Объект.Товары Цикл

	текХарактеристика = СтрокаТЧ.ХарактеристикаНоменклатуры;

	ОбработкаТабличныхЧастей.ПриИзмененииНоменклатурыТабЧасти(строкаТЧ, Объект);

		ОбработкаТабличныхЧастей.ЗаполнитьЕдиницуТабЧасти(строкаТЧ, Объект);

		ОбработкаТабличныхЧастей.ЗаполнитьСтавкуНДСТабЧасти(строкаТЧ, Объект);

		ОбработкаТабличныхЧастей.РассчитатьСуммуТабЧасти(строкаТЧ, Объект);

		ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(строкаТЧ, Объект);

	Если СтрокаТЧ.Номенклатура.ВестиУчетПоХарактеристикам Тогда

		СтрокаТЧ.ХарактеристикаНоменклатуры = текХарактеристика;

	КонецЕсли;

	СтрокаТЧ.Размещение = Объект_Склад;

КонецЦикла;

Объект.СуммаДокумента = Объект.товары.Итог("Сумма") + Объект.Услуги.Итог("Сумма");

Попытка //+2

	Объект.Обменданными.Загрузка=Истина;

	Объект.Записать(РежимЗаписиДокумента.Запись);

	Объект.Обменданными.Загрузка=Ложь;

	СтрокаСообщения = "ЗкзПозлеЗагр2_ "+Объект.Ссылка;

	ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

Исключение

	СтрокаСообщения = "ЗкзПозлеЗагр2__ "+ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());

	ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

КонецПопытки;</ПослеЗагрузки>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>ДокументСсылка.ЗаказКлиента</Источник>
			<Приемник>ДокументСсылка.КорректировкаЗаказаПокупателя</Приемник>
			<ПоискПоТабличнымЧастям>ТабличнаяЧасть.Товары:КодСтроки,Количество,Номенклатура,ХарактеристикаНоменклатуры,Цена</ПоискПоТабличнымЧастям>
			<ПоляТаблицы>Комментарий,Проведен,ЗаказПокупателя</ПоляТаблицы>
			<ПоляПоиска>ЗаказПокупателя</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>РеализацияТоваровУслуг</Код>
			<ПослеЗагрузки>

Переменная = Константы.ГраницаЗапретаИзмененияДокументов.Получить();

Если Объект.Дата &lt; Переменная или ОбъектНайден = Истина Тогда

	Отказ = Истина;

иначе

	Выполнить(Алгоритмы.СозданиеПТиУ_п411);

	Объект.ДополнительныеСвойства.Вставить("ЗаписьВРежимеОбменаДанными", Истина);

конецесли;</ПослеЗагрузки>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник>
			<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
			<ПоискПоТабличнымЧастям>ТабличнаяЧасть.Товары:Номенклатура,ХарактеристикаНоменклатуры,Количество,СтавкаНДС,Сумма,СуммаНДС,Цена
ТабличнаяЧасть.ШтрихкодыУпаковок:ШтрихкодУпаковки,ЗначениеШтрихкода</ПоискПоТабличнымЧастям>
			<ПоляТаблицы>Дата,ДатаВходящегоДокумента,СуммаВключаетНДС,ВалютаДокумента,Комментарий,НомерВходящегоДокумента</ПоляТаблицы>
			<ПоляПоиска>НомерВходящегоДокумента</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>СчетФактураВыданный</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>ДокументСсылка.СчетФактураВыданный</Источник>
			<Приемник>ДокументСсылка.СчетФактураПолученный</Приемник>
			<ПоискПоТабличнымЧастям>ТабличнаяЧасть.ДокументыОснования:ДокументОснование</ПоискПоТабличнымЧастям>
			<ПоляТаблицы>ДокументОснование,Исправление,КодВидаОперации,КодВидаОперацииНаУменьшение,Комментарий,Контрагент,КППКонтрагента,НомерИсправления,Организация,Ответственный,ПометкаУдаления,Проведен,СводныйКорректировочный,Дата,Номер</ПоляТаблицы>
			<ПоляПоиска>Дата,Номер</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>ВозвратТоваровПоставщику</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>ДокументСсылка.ВозвратТоваровПоставщику</Источник>
			<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
			<ПоляТаблицы>Дата,Номер</ПоляТаблицы>
			<ПоляПоиска>Дата,Номер</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>кд_МаркетПлейсы</Код>
			<Источник>ПеречислениеСсылка.кд_МаркетПлейсы</Источник>
			<Приемник>ПеречислениеСсылка.кд_МаркетПлейсы</Приемник>
		</Правило>
		<Правило>
			<Код>СтавкиНДС</Код>
			<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
			<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
		</Правило>
		<Правило>
			<Код>КД_СтатусыЗаказов</Код>
			<Источник>ПеречислениеСсылка.кд_СтатусыЗаказов</Источник>
			<Приемник>ПеречислениеСсылка.кд_СтатусыЗаказов_МП</Приемник>
		</Правило>
		<Правило>
			<Код>Склады</Код>
			<ПоследовательностьПолейПоиска>ПрекратитьПоиск = Истина;

КодМагазинаНаСайте = СвойстваПоиска.Получить("Код");

Если ЗначениеЗаполнено(КодМагазинаНаСайте) ТОгда

	Попытка

		КодМагазинаНаСайте = Число(КодМагазинаНаСайте);

	Исключение

		КодМагазинаНаСайте = 0;

	КонецПопытки;

КонецЕсли;

Если ЗначениеЗаполнено(КодМагазинаНаСайте) ТОгда

	Запрос = Новый Запрос(

	"

	|выбрать т.ОсновнойСклад из регистрСведений.СоответствиеМагазинов как т

	|где т.КодМагазинаНаСайте = &amp;КодМагазинаНаСайте

	|");

	Запрос.УстановитьПараметр("КодМагазинаНаСайте", КодМагазинаНаСайте);

	Выборка = Запрос.Выполнить().Выбрать();

	Если Выборка.Следующий() Тогда

		СсылкаНаОбъект = Выборка.ОсновнойСклад;

	КонецЕсли;

КонецЕсли;</ПоследовательностьПолейПоиска>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Склады</Источник>
			<Приемник>СправочникСсылка.Склады</Приемник>
			<ПоляТаблицы>Код</ПоляТаблицы>
			<ПоляПоиска>Код</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Валюты</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Валюты</Источник>
			<Приемник>СправочникСсылка.Валюты</Приемник>
			<ПоляТаблицы>Код</ПоляТаблицы>
			<ПоляПоиска>Код</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Номенклатура</Код>
			<ПоследовательностьПолейПоиска>КодНоменклатуры = СвойстваПоиска.Получить("Код");

КодНоменклатуры = ОбменССайтомПривелигированный.ВернутьРусскийПрефикс(КодНоменклатуры);

СвойстваПоиска.Вставить("Код", КодНоменклатуры);</ПоследовательностьПолейПоиска>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Номенклатура</Источник>
			<Приемник>СправочникСсылка.Номенклатура</Приемник>
			<ПоляТаблицы>Наименование,Код</ПоляТаблицы>
			<ПоляПоиска>Код</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>ХарактеристикиНоменклатуры</Код>
			<НеЗамещать>true</НеЗамещать>
			<Источник>СправочникСсылка.Номенклатура</Источник>
			<Приемник>СправочникСсылка.ХарактеристикиНоменклатуры</Приемник>
			<ПоляТаблицы>Код,Владелец</ПоляТаблицы>
			<ПоляПоиска>Код,Владелец</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>ШтрихкодыУпаковокТоваров</Код>
			<ПоследовательностьПолейПоиска>Если СвойстваПоиска["Характеристика"] = неопределено тогда

	СвойстваПоиска.Вставить("Характеристика", Справочники.ХарактеристикиНоменклатуры.ПустаяСсылка());

КонецЕсли;</ПоследовательностьПолейПоиска>
			<НеЗамещать>true</НеЗамещать>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
			<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
			<Источник>СправочникСсылка.ШтрихкодыУпаковокТоваров</Источник>
			<Приемник>СправочникСсылка.ШтрихкодыУпаковокТоваров</Приемник>
			<ПоляТаблицы>ЗначениеШтрихкода,Номенклатура,Характеристика</ПоляТаблицы>
			<ПоляПоиска>ЗначениеШтрихкода,Номенклатура,Характеристика</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Контрагенты</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>СправочникСсылка.Контрагенты</Источник>
			<Приемник>СправочникСсылка.Контрагенты</Приемник>
			<ПоляТаблицы>Наименование,ЭтоГруппа,Код</ПоляТаблицы>
			<ПоляПоиска>ЭтоГруппа,Код</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Организации</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>СправочникСсылка.Организации</Источник>
			<Приемник>СправочникСсылка.Организации</Приемник>
			<ПоляТаблицы>Наименование,ЭтоГруппа,Код</ПоляТаблицы>
			<ПоляПоиска>ЭтоГруппа,Код</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>Пользователи</Код>
			<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
			<Источник>СправочникСсылка.Пользователи</Источник>
			<Приемник>СправочникСсылка.Пользователи</Приемник>
			<ПоляТаблицы>Наименование,ЭтоГруппа,Код</ПоляТаблицы>
			<ПоляПоиска>ЭтоГруппа,Код</ПоляПоиска>
		</Правило>
		<Правило>
			<Код>КД_КартинкиИФайлы</Код>
			<ПослеЗагрузки>Если не ПараметрыОбъекта = неопределено тогда

	ДвоичныеДанные = ПараметрыОбъекта["ДвоичныеДанные"].Получить();

	Расширение = ПараметрыОбъекта["Расширение"];

	ТекДата = ТекущаяДата();

	ДопСтрока = Строка(Час(ТекДата)) + Строка(Минута(ТекДата)) + Строка(Секунда(ТекДата));

	ИдентификаторФайла = Лев(Объект.Идентификатор, 38) + "_" + ДопСтрока + Расширение;

	Струк = Обработки.КД_РаботаСФайлами.ПолучитьПуть();

	Обработки.КД_РаботаСФайлами.ЗаписатьФайлВПапку(Объект.Объект, ДвоичныеДанные, Объект.Идентификатор, Расширение, ИдентификаторФайла, Струк, ТекДата);

КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
			<Приемник>РегистрСведенийЗапись.КД_КартинкиИФайлы</Приемник>
			<ПоляТаблицы>Объект,Идентификатор,ДатаСохранения</ПоляТаблицы>
		</Правило>
		<Правило>
			<Код>КД_МПВБ_ЗаказПокупателя</Код>
			<Приемник>РегистрСведенийЗапись.КД_МПВБ</Приемник>
			<ПоляТаблицы>ЗаказПокупателя,КодСтроки,СРИД,НомерСборочногоЗадания,Стикер,Номенклатура</ПоляТаблицы>
		</Правило>
		<Правило>
			<Код>КурсыВалют</Код>
			<Источник>РегистрСведенийЗапись.КурсыВалют</Источник>
			<Приемник>РегистрСведенийЗапись.КурсыВалют</Приемник>
			<ПоляТаблицы>Валюта,Кратность,Курс,Период</ПоляТаблицы>
		</Правило>
		<Правило>
			<Код>РежимыВыгрузкиОбъектовОбмена</Код>
			<Источник>ПеречислениеСсылка.РежимыВыгрузкиОбъектовОбмена</Источник>
			<Приемник>ПеречислениеСсылка.РежимыВыгрузкиОбъектовОбмена</Приемник>
		</Правило>
	</ПравилаКонвертацииОбъектов>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм ИспользуетсяПриЗагрузке="true" Имя="ВременнаяОтменаПроведенияСвязаннойРеализации">
			<Текст>

Если ЗначениеЗаполнено(Объект.Ссылка) Тогда

	Запрос = Запросы.ПолучитьДанныеДляОтложенногоПроведения;

	Запрос.УстановитьПараметр("Сделка", Объект.Ссылка);

	Результат = Запрос.Выполнить();

	Выборка = Результат.Выбрать();

	Пока Выборка.Следующий() Цикл

		ДокументСсылка = Выборка.Реализация;

		Выполнить(Алгоритмы.ОбработатьДокументВыборки);

		ДокументСсылка = Выборка.СчетФактура;

		Выполнить(Алгоритмы.ОбработатьДокументВыборки);

	КонецЦикла;

КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм ИспользуетсяПриЗагрузке="true" Имя="ВыполнитьОтложенноеПроведениеДокументов">
			<Текст>

Если не ДокументыДляОтложенногоПроведения().Количество() = 0 Тогда

	// сворачиваем таблицу по уникальным полям

	ДокументыДляОтложенногоПроведения().Свернуть("ДокументСсылка, ДатаДокумента, ДокументПроведенУспешно", "ЭтоКоллизия");

	// сортируем документы по возрастанию даты документов

	ДокументыДляОтложенногоПроведения().Сортировать("ДатаДокумента");

	// инициализируем колонку результата проведения документа

	ДокументыДляОтложенногоПроведения().ЗаполнитьЗначения(Ложь, "ДокументПроведенУспешно");

	Для Каждого СтрокаТаблицы Из ДокументыДляОтложенногоПроведения() Цикл

		Если СтрокаТаблицы.ДокументСсылка.Пустая() Тогда

			Продолжить;

		КонецЕсли;

		Объект = СтрокаТаблицы.ДокументСсылка.ПолучитьОбъект();

		Если Объект = Неопределено или Объект.Проведен Тогда

			Продолжить;

		КонецЕсли;

		//Сообщить("Объект = " + Объект);

		// устанавливаем узел-отправитель для предотвращения регистрации объекта на узле, для которого производим загрузку

		// проведение выполняем не в режиме загрузки

		УстановитьОбменДаннымиЗагрузка(Объект, Ложь);

		ОписаниеОшибки = "";

		Попытка

			Объект.ДополнительныеСвойства.Вставить("ОтложенноеПроведение");

			Объект.ДополнительныеСвойства.Вставить("ЗаписьВРежимеОбменаДанными", Истина);

			//ЗаписьЖурналаРегистрацииОбменДанными("ЗаписьВРежимеОбменаДанными установлена", УровеньЖурналаРегистрации.Предупреждение);

			//ЗаписьЖурналаРегистрацииОбменДанными("ПроверитьЗаполнение = " + Объект.ПроверитьЗаполнение(), УровеньЖурналаРегистрации.Предупреждение);

			Если Объект.ПроверитьЗаполнение() Тогда

				// При проведении документа снимаем запрет на выполнение ПРО,

				// т.к. ПРО были проигнорированы при обычной записи документа с целью оптимизации скорости загрузки данных.

				Если Объект.ДополнительныеСвойства.Свойство("ОтключитьМеханизмРегистрацииОбъектов") Тогда

					Объект.ДополнительныеСвойства.Удалить("ОтключитьМеханизмРегистрацииОбъектов");

				КонецЕсли;

				Объект.ДополнительныеСвойства.Вставить("ПропуститьПроверкуЗапретаИзменения");

				Если СтрокаТаблицы.ЭтоКоллизия &gt; 0 И ИспользуетсяВерсионирование() Тогда

					// Заполняем данные создаваемой версии

					Объект.ДополнительныеСвойства.Вставить("ЭтоВерсияОбмена", Истина);

					Объект.ДополнительныеСвойства.Вставить("ТипВерсииОбъекта", Перечисления["ТипыВерсийОбъекта"].ПринятыеДанныеПоКоллизии);

					Объект.ДополнительныеСвойства.Вставить("АвторВерсии", УзелОбменаЗагрузкаДанных);

					Объект.ДополнительныеСвойства.Вставить("Комментарий", НСтр("ru = 'Версия получена из другой программы.'"));

				КонецЕсли;

				//ЗаписьЖурналаРегистрацииОбменДанными("Начинаем проведение документа " + СокрЛП(Объект), УровеньЖурналаРегистрации.Предупреждение);

				// выполняем попытку проведения документа

				Объект.Записать(РежимЗаписиДокумента.Проведение);

				//ЗаписьЖурналаРегистрацииОбменДанными("УСПЕХ!!!!", УровеньЖурналаРегистрации.Предупреждение);

				СтрокаТаблицы.ДокументПроведенУспешно = Объект.Проведен;

			Иначе

				СтрокаТаблицы.ДокументПроведенУспешно = Ложь;

				ОписаниеОшибки = НСтр("ru = 'Ошибка заполнения реквизитов документа'");

			КонецЕсли;

		Исключение

			//ОписаниеОшибки = КраткоеПредставлениеОшибки(ИнформацияОбОшибке());

			//ОписаниеОшибки = ИнформацияОбОшибке();

			ОписаниеОшибки = ОписаниеОшибки();

			СтрокаТаблицы.ДокументПроведенУспешно = Ложь;

		КонецПопытки;

		// если документ провести не удалось фиксируем ошибку в ЖР

		Если Не СтрокаТаблицы.ДокументПроведенУспешно Тогда

			СтрокаСообщения = НСтр("ru = 'Ошибка при отложенном проведении документа: %1. Описание ошибки: %2'",

				ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка());

			СтрокаСообщения = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(СтрокаСообщения, Строка(Объект), ОписаниеОшибки);

			ЗаписьЖурналаРегистрацииОбменДанными(СтрокаСообщения, УровеньЖурналаРегистрации.Предупреждение);

			СообщенияПользователю = ПолучитьСообщенияПользователю(Истина);

			ТекстОшибки = "";

			Для Каждого Сообщение Из СообщенияПользователю Цикл

				ТекстОшибки = ТекстОшибки + Сообщение.Текст + Символы.ПС;

			КонецЦикла;

			РегистрыСведений.РезультатыОбменаДанными.ЗарегистрироватьОшибкуПроверкиОбъекта(СтрокаТаблицы.ДокументСсылка, УзелОбменаЗагрузкаДанных,

				Объект.Метаданные().Синоним, ТекстОшибки, Перечисления.ТипыПроблемОбменаДанными.НепроведенныйДокумент);

		КонецЕсли;

	КонецЦикла;

ДокументыДляОтложенногоПроведения().Очистить();

КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм ИспользуетсяПриЗагрузке="true" Имя="ОбработатьДокументВыборки">
			<Текст>

Если ЗначениеЗаполнено(ДокументСсылка) Тогда

	ДокументОбъект = ДокументСсылка.ПолучитьОбъект();

	ДокументОбъект.Проведен = Ложь;

	Для ИндексДвижений = 1 По ДокументОбъект.Движения.Количество() Цикл

		ДокументОбъект.Движения[ИндексДвижений - 1].Очистить();

	КонецЦикла;

	ДокументОбъект.ОбменДанными.Загрузка = Истина;

	Попытка

		//ДокументОбъект.Записать(РежимЗаписиДокумента.ОтменаПроведения);

		ДокументОбъект.Записать(РежимЗаписиДокумента.Запись);

		ОтменаПроведенияПрошлаУспешно = Истина;

	Исключение

		ОтменаПроведенияПрошлаУспешно = Ложь;

		ОписаниеОшибки = КраткоеПредставлениеОшибки(ИнформацияОбОшибке());

		ЗаписьЖурналаРегистрацииОбменДанными("Отмена проведения документа " + СокрЛП(Выборка.Ссылка) + " не удачна: " + ОписаниеОшибки, УровеньЖурналаРегистрации.Предупреждение);

	КонецПопытки;

	Если ОтменаПроведенияПрошлаУспешно Тогда

		СтрокаТаблицы = Параметры.ДокументыДляОтложенногоПроведенияДоп.Добавить();

		СтрокаТаблицы.ДокументСсылка = ДокументОбъект.Ссылка;

		СтрокаТаблицы.ДатаДокумента  = ДокументОбъект.Дата;

		СтрокаТаблицы.ЭтоКоллизия 	 = Ложь;

	КонецЕсли;

КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм ИспользуетсяПриЗагрузке="true" Имя="СозданиеЗаказа_п41">
			<Текст>Переменная = Константы.ГраницаЗапретаИзмененияДокументов.Получить();

//changed+ Долгих Н. 27.05.2025

ОбъектУТ10 = Неопределено;

Если ЗначениеЗаполнено(Объект.Ссылка) Тогда

	ОбъектУТ10 = Объект.Ссылка.ПолучитьОбъект();

	Если Не ОбъектУТ10 = Неопределено Тогда

		Если ОбъектУТ10.Дата &lt; Переменная или ОбъектУТ10.кд_СтатусЗаказа = Перечисления.кд_СтатусыЗаказов_МП.Отменен Тогда

			Отказ = Истина; //!!вернуть после отладки -- Глазунов

		КонецЕсли;

	КонецЕсли;

КонецЕсли;

//СозданиеЗаказа41

Если не ЗначениеЗаполнено(Объект.Дата) Тогда

	Объект.Дата = ТекущаяДатаСеанса();

КонецЕсли;

Объект.Организация = параметры.Организация;

Объект.Контрагент = параметры.Контрагент;

Объект.ДоговорКонтрагента = параметры.ДоговорКонтрагента;

текТипЦен = Параметры.ТипЦен;



Объект.ФормаОплаты = перечисления.ФормаОплаты.Безналичный;

Объект.СуммаВключаетНДС = Истина;

Объект.УчитыватьНДС = Истина;

Объект.КратностьВзаиморасчетов = 1;

Объект.КурсВзаиморасчетов = 1;

Объект.ТипЦен = текТипЦен;

Объект.КаналСбыта = Параметры.КаналСбыта;

Если не ПараметрыОбъекта = Неопределено ТОгда

	КодМагазинаНаСайте = ПараметрыОбъекта.Получить("кд_интернетНомерСклада");

	Если ЗначениеЗаполнено(КодМагазинаНаСайте) ТОгда

		Запрос = Новый Запрос(

		"

		|выбрать т.Подразделение, т.ОсновнойСклад из регистрСведений.СоответствиеМагазинов как т

		|где т.КодМагазинаНаСайте = &amp;КодМагазинаНаСайте и не т.Служебная = Истина

		|");

		Запрос.УстановитьПараметр("КодМагазинаНаСайте", КодМагазинаНаСайте);

		Выборка = Запрос.Выполнить().Выбрать();

		Если Выборка.Следующий() Тогда

			Объект.Подразделение = Выборка.Подразделение;

			Объект.Склад = Выборка.ОсновнойСклад;

		КонецЕсли;

	КонецЕсли;

КонецЕсли;

//+

Объект.ФлагДоставки = Истина;

Объект.ДатаДоставки = Объект.Дата;

Объект.СтруктурнаяЕдиница = Параметры.Организация.ОсновнойБанковскийСчет;//Справочники.БанковскиеСчета.НайтиПоРеквизиту("НомерСчета", "40702810323000086672");

Объект.КД_Проект = Справочники.Проекты.НайтиПоНаименованию("Дистанционная доставка");

Объект.КаналСбыта = Справочники.КаналыСбыта.НайтиПоНаименованию("КЦ");

Объект.Грузополучатель = справочники.контрагенты.найтиПоРеквизиту("ИНН","7704217370");//Вайлбериз ИР //Объект.Контрагент;

//-

Для каждого строкаТЧ из Объект.Товары Цикл

	строкаТЧ.ДатаДоставкиТовара = Объект.Дата;

	текХарактеристика = СтрокаТЧ.ХарактеристикаНоменклатуры;

	ОбработкаТабличныхЧастей.ПриИзмененииНоменклатурыТабЧасти(строкаТЧ, Объект);

	ОбработкаТабличныхЧастей.ЗаполнитьЕдиницуТабЧасти(строкаТЧ, Объект);

	ОбработкаТабличныхЧастей.ЗаполнитьСтавкуНДСТабЧасти(строкаТЧ, Объект);

	ОбработкаТабличныхЧастей.РассчитатьСуммуТабЧасти(строкаТЧ, Объект);

	ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(строкаТЧ, Объект);

	Если СтрокаТЧ.Номенклатура.ВестиУчетПоХарактеристикам Тогда

		СтрокаТЧ.ХарактеристикаНоменклатуры = текХарактеристика;

	КонецЕсли;

	СтрокаТЧ.Размещение = Объект.Склад;

КонецЦикла;

Объект.СуммаДокумента = Объект.товары.Итог("Сумма") + Объект.Услуги.Итог("Сумма");</Текст>
		</Алгоритм>
		<Алгоритм ИспользуетсяПриЗагрузке="true" Имя="СозданиеПТиУ_п411">
			<Текст>Если не ЗначениеЗаполнено(Объект.Дата) Тогда

	Объект.Дата = ТекущаяДатаСеанса();

КонецЕсли;

Если не ПараметрыОбъекта = неопределено ТОгда

	КодМагазинаНаСайте = ПараметрыОбъекта.Получить("кд_интернетНомерСклада");

	НомерСчетаФактуры = ПараметрыОбъекта.Получить("кд_НомерСФ");

	Если ЗначениеЗаполнено(КодМагазинаНаСайте) ТОгда

		Запрос = Новый Запрос(

		"

		|выбрать т.Подразделение, т.ОсновнойСклад из регистрСведений.СоответствиеМагазинов как т

		|где т.КодМагазинаНаСайте = &amp;КодМагазинаНаСайте и не т.Служебная = Истина

		|");

		Запрос.УстановитьПараметр("КодМагазинаНаСайте", КодМагазинаНаСайте);

		Выборка = Запрос.Выполнить().Выбрать();

		Если Выборка.Следующий() Тогда

			Объект.Подразделение = Выборка.Подразделение;

			Объект.СкладОрдер = Выборка.ОсновнойСклад;

		КонецЕсли;

	КонецЕсли;

КонецЕсли;

Объект.Организация = параметры.Организация;

Объект.Контрагент = параметры.Контрагент;

Объект.ДоговорКонтрагента = параметры.ДоговорКонтрагентаВозврат;

//Объект.ФормаОплаты = перечисления.ФормаОплаты.Безналичный;

Объект.СуммаВключаетНДС = Истина;

Объект.УчитыватьНДС = Истина;

Объект.ОтражатьВБухгалтерскомУчете = Истина;

Объект.КратностьВзаиморасчетов = 1;

Объект.КурсВзаиморасчетов = 1;

Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;

Объект.ОтражатьВУправленческомУчете = Истина;

Объект.ОтражатьВБухгалтерскомУчете = Истина;

Объект.ОтражатьВНалоговомУчете = Истина;

Для каждого строкаТЧ из Объект.Товары Цикл

	текХарактеристика = СтрокаТЧ.ХарактеристикаНоменклатуры;

	ОбработкаТабличныхЧастей.ПриИзмененииНоменклатурыТабЧасти(строкаТЧ, Объект);

	ОбработкаТабличныхЧастей.ЗаполнитьЕдиницуЦенуПродажиТабЧасти(строкаТЧ, Объект, Параметры.ВалютаРегламентированногоУчета);

	Если СтрокаТЧ.Номенклатура.ВестиУчетПоХарактеристикам Тогда

		СтрокаТЧ.ХарактеристикаНоменклатуры = текХарактеристика;

	КонецЕсли;

	СтрокаТЧ.Склад = Объект.СкладОрдер;

КонецЦикла;

Объект.СуммаДокумента = Объект.товары.Итог("Сумма");

Объект.Записать();

доСФ = Документы.СчетФактураПолученный.СоздатьДокумент();

доСФ.Заполнить(Объект.Ссылка);

доСФ.НомерВходящегоДокумента = НомерСчетаФактуры;

доСФ.Дата = Объект.Дата;

доСФ.ДатаВходящегоДокумента = Объект.Дата;

//попытка

///	доСФ.Записать(РежимЗаписиДокумента.Проведение);

//исключение

	доСФ.Записать();

//	ЗаписьЖурналаРегистрации(НСтр("ru = 'Выполнение операции'"),

//       УровеньЖурналаРегистрации.Ошибка,,,

//       ОбработкаОшибок.ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));

//конецпопытки;</Текст>
		</Алгоритм>
		<Алгоритм ИспользуетсяПриЗагрузке="true" Имя="СоздатьЗакрытиеЗаказовПокупателей">
			<Текст>доЗакрытиеЗаказовПокупателей = Документы.ЗакрытиеЗаказовПокупателей.СоздатьДокумент();

доЗакрытиеЗаказовПокупателей.Заполнить(ОбъектСсылка);

//Для каждого СтрокаТЧ из доЗакрытиеЗаказовПокупателей.Заказы Цикл

//	СтрокаТЧ.ПричинаОтменыЗаказа = Справочники.КД_ПричиныОтменыЗаказов.НайтиПоКоду("108");

//КонецЦикла;

Если не ЗначениеЗаполнено(доЗакрытиеЗаказовПокупателей.Дата) тогда

	доЗакрытиеЗаказовПокупателей.Дата = ТекущаяДатаСеанса();

КонецЕсли;

//changed+ Долгих Н. 27.05.2025

Попытка

	//доЗакрытиеЗаказовПокупателей.Записать(РежимЗаписиДокумента.Проведение);

	Если ЗначениеЗаполнено(РТУ) Тогда

		Параметры.мРТУдляУдаления.Добавить(РТУ);

	КонецЕсли;

	доЗакрытиеЗаказовПокупателей.Записать(РежимЗаписиДокумента.Запись);

	СтрокаТаблицы = Параметры.ДокументыДляОтложенногоПроведенияДоп.Добавить();

	СтрокаТаблицы.ДокументСсылка = доЗакрытиеЗаказовПокупателей.Ссылка;

	СтрокаТаблицы.ДатаДокумента  = доЗакрытиеЗаказовПокупателей.Дата;

	СтрокаТаблицы.ЭтоКоллизия = Ложь;

Исключение

	Отказ = Истина;

	ОписаниеОшибки = КраткоеПредставлениеОшибки(ИнформацияОбОшибке());

	Сообщить("Документ ""Закрытие заказов покупателей"" не записан: " + ОписаниеОшибки);

	ЗаписьЖурналаРегистрацииОбменДанными(ОписаниеОшибки, УровеньЖурналаРегистрации.Предупреждение);

КонецПопытки;

//changed- Долгих Н. 27.05.2025</Текст>
		</Алгоритм>
	</Алгоритмы>
	<Запросы>
		<Запрос ИспользуетсяПриЗагрузке="true" Имя="ЗакрытияЗаказов">
			<Текст>ВЫБРАТЬ

	т.Ссылка КАК Заказ,

	т.СтатусЗаказа,

	т.кд_СтатусЗаказа

ПОМЕСТИТЬ вт_Заказы

ИЗ

	Документ.ЗаказПокупателя КАК т

ГДЕ

	ИСТИНА

	И т.Ссылка = &amp;Заказ

	И т.Проведен = ИСТИНА

;

////////////////////////////////////////////////////////////////////////////////

ВЫБРАТЬ РАЗЛИЧНЫЕ

	т.Ссылка,

	тч.ЗаказПокупателя

ПОМЕСТИТЬ вт_закрытия

ИЗ

	Документ.ЗакрытиеЗаказовПокупателей.Заказы КАК тч

		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ЗакрытиеЗаказовПокупателей КАК т

		ПО (т.Ссылка = тч.Ссылка)

ГДЕ

	т.Проведен = ИСТИНА

	И тч.ЗаказПокупателя В

			(ВЫБРАТЬ

				т.Заказ

			ИЗ

				вт_заказы КАК т)

;

////////////////////////////////////////////////////////////////////////////////

ВЫБРАТЬ

	МАКСИМУМ(т.Ссылка) КАК РТУ,

	тз.Заказ

ПОМЕСТИТЬ вт_рту

ИЗ

	Документ.РеализацияТоваровУслуг КАК т

		ВНУТРЕННЕЕ СОЕДИНЕНИЕ вт_Заказы КАК тз

		ПО т.Сделка = тз.Заказ

			И (т.Проведен = ИСТИНА)

СГРУППИРОВАТЬ ПО

	тз.Заказ

;

////////////////////////////////////////////////////////////////////////////////

ВЫБРАТЬ

	МАКСИМУМ(т.Ссылка) КАК РО,

	тз.Заказ

ПОМЕСТИТЬ вт_ро

ИЗ

	Документ.РасходныйОрдерНаТовары КАК т

		ВНУТРЕННЕЕ СОЕДИНЕНИЕ вт_рту КАК тз

		ПО т.ДокументПередачи = тз.РТУ

			И (т.Проведен = ИСТИНА)

СГРУППИРОВАТЬ ПО

	тз.Заказ

;

////////////////////////////////////////////////////////////////////////////////

ВЫБРАТЬ

	т.Заказ,

	т.СтатусЗаказа,

	т.кд_СтатусЗаказа,

	тз.Ссылка КАК Закрытие,

	тРТУ.РТУ,

	тРО.РО

ИЗ

	вт_Заказы КАК т

		ЛЕВОЕ СОЕДИНЕНИЕ вт_закрытия КАК тз

		ПО т.Заказ = тз.ЗаказПокупателя

		ЛЕВОЕ СОЕДИНЕНИЕ вт_рту КАК тРТУ

		ПО т.Заказ = тРТУ.Заказ

		ЛЕВОЕ СОЕДИНЕНИЕ вт_ро КАК тРО

		ПО т.Заказ = тРО.Заказ</Текст>
		</Запрос>
		<Запрос ИспользуетсяПриЗагрузке="true" Имя="ПолучитьДанныеДляОтложенногоПроведения">
			<Текст>ВЫБРАТЬ

	РеализацияТоваровУслуг.Ссылка КАК Реализация

ПОМЕСТИТЬ ВТ_Реализации

ИЗ

	Документ.РеализацияТоваровУслуг КАК РеализацияТоваровУслуг

ГДЕ

	РеализацияТоваровУслуг.Сделка = &amp;Сделка

	И РеализацияТоваровУслуг.ПометкаУдаления = ЛОЖЬ

	И РеализацияТоваровУслуг.Проведен = ИСТИНА

;

////////////////////////////////////////////////////////////////////////////////

ВЫБРАТЬ

	СчетФактураВыданныйДокументыОснования.Ссылка КАК СчетФактура,

	ВТ_Реализации.Реализация

ПОМЕСТИТЬ ВТ_СФ

ИЗ

	Документ.СчетФактураВыданный.ДокументыОснования КАК СчетФактураВыданныйДокументыОснования

		ЛЕВОЕ СОЕДИНЕНИЕ Документ.СчетФактураВыданный КАК СчетФактураВыданный

		ПО СчетФактураВыданныйДокументыОснования.Ссылка = СчетФактураВыданный.Ссылка

		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Реализации КАК ВТ_Реализации

		ПО (СчетФактураВыданныйДокументыОснования.ДокументОснование = ВТ_Реализации.Реализация)

ГДЕ

	НЕ ВТ_Реализации.Реализация ЕСТЬ NULL

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ

	СчетФактураВыданный.Ссылка,

	ВТ_Реализации.Реализация

ИЗ

	Документ.СчетФактураВыданный КАК СчетФактураВыданный

		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Реализации КАК ВТ_Реализации

		ПО СчетФактураВыданный.ДокументОснование = ВТ_Реализации.Реализация

ГДЕ

	НЕ ВТ_Реализации.Реализация ЕСТЬ NULL

	И СчетФактураВыданный.ПометкаУдаления = ЛОЖЬ

;

////////////////////////////////////////////////////////////////////////////////

ВЫБРАТЬ

	ВТ_СФ.СчетФактура,

	ВТ_СФ.Реализация

ПОМЕСТИТЬ ВТ_Результат

ИЗ

	ВТ_СФ КАК ВТ_СФ

СГРУППИРОВАТЬ ПО

	ВТ_СФ.Реализация,

	ВТ_СФ.СчетФактура

;

////////////////////////////////////////////////////////////////////////////////

ВЫБРАТЬ

	ВТ_Результат.СчетФактура,

	ВТ_Результат.Реализация

ИЗ

	ВТ_Результат КАК ВТ_Результат</Текст>
		</Запрос>
	</Запросы>
</ПравилаОбмена>
<ИнформацияОТипахДанных>
	<ТипДанных Имя="РегистрСведенийЗапись.КД_МПВБ">
		<Номенклатура>СправочникСсылка.Номенклатура</Номенклатура>
		<Стикер>Строка</Стикер>
		<НомерСборочногоЗадания>Строка</НомерСборочногоЗадания>
		<СРИД>Строка</СРИД>
		<КодСтроки>Число</КодСтроки>
		<ЗаказПокупателя>ДокументСсылка.ЗаказПокупателя</ЗаказПокупателя>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Организации">
		<Наименование>Строка</Наименование>
		<Код>Строка</Код>
		<ЭтоГруппа>Булево</ЭтоГруппа>
	</ТипДанных>
	<ТипДанных Имя="РегистрСведенийЗапись.КД_КартинкиИФайлы">
		<ДатаСохранения>Дата</ДатаСохранения>
		<Идентификатор>Строка</Идентификатор>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Валюты">
		<Код>Строка</Код>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.ШтрихкодыУпаковокТоваров">
		<Характеристика>СправочникСсылка.ХарактеристикиНоменклатуры</Характеристика>
		<Номенклатура>СправочникСсылка.Номенклатура</Номенклатура>
		<ЗначениеШтрихкода>Строка</ЗначениеШтрихкода>
	</ТипДанных>
	<ТипДанных Имя="РегистрСведенийЗапись.КурсыВалют">
		<Период>Дата</Период>
		<Курс>Число</Курс>
		<Кратность>Число</Кратность>
		<Валюта>СправочникСсылка.Валюты</Валюта>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Номенклатура">
		<Наименование>Строка</Наименование>
		<Код>Строка</Код>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Контрагенты">
		<Наименование>Строка</Наименование>
		<Код>Строка</Код>
		<ЭтоГруппа>Булево</ЭтоГруппа>
	</ТипДанных>
	<ТипДанных Имя="ДокументСсылка.СчетФактураПолученный">
		<СводныйКорректировочный>Булево</СводныйКорректировочный>
		<ПометкаУдаления>Булево</ПометкаУдаления>
		<Организация>СправочникСсылка.Организации</Организация>
		<КППКонтрагента>Строка</КППКонтрагента>
		<Контрагент>СправочникСсылка.Контрагенты</Контрагент>
		<Ответственный>СправочникСсылка.Пользователи</Ответственный>
		<Комментарий>Строка</Комментарий>
		<КодВидаОперацииНаУменьшение>Строка</КодВидаОперацииНаУменьшение>
		<Проведен>Булево</Проведен>
		<КодВидаОперации>Строка</КодВидаОперации>
		<Исправление>Булево</Исправление>
		<НомерИсправления>Число</НомерИсправления>
		<Номер>Строка</Номер>
		<Дата>Дата</Дата>
	</ТипДанных>
	<ТипДанных Имя="ДокументСсылка.ВозвратТоваровПоставщику">
		<Номер>Строка</Номер>
		<Дата>Дата</Дата>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Пользователи">
		<Наименование>Строка</Наименование>
		<Код>Строка</Код>
		<ЭтоГруппа>Булево</ЭтоГруппа>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.ХарактеристикиНоменклатуры">
		<Владелец>СправочникСсылка.Номенклатура</Владелец>
		<Код>Строка</Код>
	</ТипДанных>
	<ТипДанных Имя="СправочникСсылка.Склады">
		<Код>Строка</Код>
	</ТипДанных>
	<ТипДанных Имя="ДокументСсылка.ПоступлениеТоваровУслуг">
		<ТоварыТабличнаяЧасть>
			<Цена>Число</Цена>
			<Сумма>Число</Сумма>
			<СуммаНДС>Число</СуммаНДС>
			<СтавкаНДС>ПеречислениеСсылка.СтавкиНДС</СтавкаНДС>
			<Количество>Число</Количество>
			<ХарактеристикаНоменклатуры>СправочникСсылка.ХарактеристикиНоменклатуры</ХарактеристикаНоменклатуры>
			<Номенклатура>СправочникСсылка.Номенклатура</Номенклатура>
		</ТоварыТабличнаяЧасть>
		<ШтрихкодыУпаковокТабличнаяЧасть>
			<ЗначениеШтрихкода>Строка</ЗначениеШтрихкода>
			<ШтрихкодУпаковки>СправочникСсылка.ШтрихкодыУпаковокТоваров</ШтрихкодУпаковки>
		</ШтрихкодыУпаковокТабличнаяЧасть>
		<Комментарий>Строка</Комментарий>
		<ВалютаДокумента>СправочникСсылка.Валюты</ВалютаДокумента>
		<СуммаВключаетНДС>Булево</СуммаВключаетНДС>
		<ДатаВходящегоДокумента>Дата</ДатаВходящегоДокумента>
		<Дата>Дата</Дата>
		<НомерВходящегоДокумента>Строка</НомерВходящегоДокумента>
	</ТипДанных>
	<ТипДанных Имя="ДокументСсылка.КорректировкаЗаказаПокупателя">
		<ТоварыТабличнаяЧасть>
			<ХарактеристикаНоменклатуры>СправочникСсылка.ХарактеристикиНоменклатуры</ХарактеристикаНоменклатуры>
			<Номенклатура>СправочникСсылка.Номенклатура</Номенклатура>
			<Количество>Число</Количество>
			<Цена>Число</Цена>
			<КодСтроки>Число</КодСтроки>
		</ТоварыТабличнаяЧасть>
		<Проведен>Булево</Проведен>
		<Комментарий>Строка</Комментарий>
		<ЗаказПокупателя>ДокументСсылка.ЗаказПокупателя</ЗаказПокупателя>
	</ТипДанных>
	<ТипДанных Имя="ДокументСсылка.ЗаказПокупателя">
		<ТоварыТабличнаяЧасть>
			<ХарактеристикаНоменклатуры>СправочникСсылка.ХарактеристикиНоменклатуры</ХарактеристикаНоменклатуры>
			<Номенклатура>СправочникСсылка.Номенклатура</Номенклатура>
			<Количество>Число</Количество>
			<Цена>Число</Цена>
			<КодСтроки>Число</КодСтроки>
		</ТоварыТабличнаяЧасть>
		<кд_СтатусЗаказа>ПеречислениеСсылка.кд_СтатусыЗаказов_МП</кд_СтатусЗаказа>
		<ВалютаДокумента>СправочникСсылка.Валюты</ВалютаДокумента>
		<Проведен>Булево</Проведен>
		<ПометкаУдаления>Булево</ПометкаУдаления>
		<КомментарийКЦ>Строка</КомментарийКЦ>
		<Комментарий>Строка</Комментарий>
		<кд_МаркетПлейс>ПеречислениеСсылка.кд_МаркетПлейсы</кд_МаркетПлейс>
		<ДатаОтгрузки>Дата</ДатаОтгрузки>
	</ТипДанных>
</ИнформацияОТипахДанных>
<АлгоритмПослеЗагрузкиПараметров>Параметры.Вставить("Организация", УзелОбменаЗагрузкаДанных.Организация);

Параметры.Вставить("Контрагент", УзелОбменаЗагрузкаДанных.Контрагент);

Параметры.Вставить("ДоговорКонтрагента", УзелОбменаЗагрузкаДанных.ДоговорКонтрагента);

Параметры.Вставить("ДоговорКонтрагентаВозврат", УзелОбменаЗагрузкаДанных.ДоговорКонтрагентаВозврат);

Параметры.Вставить("ТипЦен", УзелОбменаЗагрузкаДанных.ТипЦен);

Параметры.Вставить("УслугаУпаковки", УзелОбменаЗагрузкаДанных.УслугаУпаковки);

Параметры.Вставить("ВалютаРегламентированногоУчета", Константы.ВалютаРегламентированногоУчета.Получить());

Параметры.Вставить("УзелОбменаЗагрузкаДанных", УзелОбменаЗагрузкаДанных);

Параметры.Вставить("мЗаказовКОбратнойРегистрации", Новый Массив);

Параметры.Вставить("мРТУдляУдаления", Новый Массив);

Запрос = Новый Запрос(

"выбрать т.ссылка из справочник.КаналыСбыта как т

|где т.наименование = ""КЦ""");

Выборка = Запрос.Выполнить().Выбрать();

Если Выборка.Следующий() тогда

Параметры.Вставить("КаналСбыта", выборка.Ссылка);

Иначе

Параметры.Вставить("КаналСбыта", Неопределено);

КонецЕсли;

ДокументыДляОтложенногоПроведенияДоп = Новый ТаблицаЗначений;

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ДокументОбъект"); // Поле оставлено для совместимости с предыдущими версиями

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ДокументСсылка");

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ДатаДокумента",           одОписаниеТипа("Дата"));

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ДокументПроведенУспешно", одОписаниеТипа("Булево"));

ДокументыДляОтложенногоПроведенияДоп.Колонки.Добавить("ЭтоКоллизия", одОписаниеТипа("Число"));

Параметры.Вставить("ДокументыДляОтложенногоПроведенияДоп", ДокументыДляОтложенногоПроведенияДоп);</АлгоритмПослеЗагрузкиПараметров>
<ДанныеПоОбмену ПланОбмена="кд_УОТ_УТ10" Кому="UT10" ОтКого="UOT2" НомерИсходящегоСообщения="1890" НомерВходящегоСообщения="25" УдалитьРегистрациюИзменений="true" ВерсияОтправителя="11.5.25.85"/>
<Объект Нпп="1" Тип="ДокументСсылка.ЗаказПокупателя" ИмяПравила="ЗаказПокупателя"><Ссылка>
	<Свойство Имя="{УникальныйИдентификатор}" Тип="Строка" ТипИсточника="ДокументСсылка.ЗаказКлиента" ТипПриемника="ДокументСсылка.ЗаказПокупателя">
		<Значение>d92a7e91-0712-11f1-8ceb-005056a0e358</Значение>
	</Свойство>
</Ссылка>
	<Свойство Имя="ДатаОтгрузки" Тип="Дата">
		<Значение>2026-02-11T00:00:00</Значение>
	</Свойство>
	<Свойство Имя="кд_МаркетПлейс" Тип="ПеречислениеСсылка.кд_МаркетПлейсы">
		<Значение>ВБ</Значение>
	</Свойство>
	<Свойство Имя="Комментарий" Тип="Строка"/>
	<Свойство Имя="КомментарийКЦ" Тип="Строка">
		<Значение>Номер сборочного задания WB: 4612722947
Номер сборочного задания WB: 4612722946
11.02.2026 13:24:34</Значение>
	</Свойство>
	<ЗначениеПараметра Имя="кд_интернетНомерСклада" Тип="Число">
		<Значение>227</Значение>
	</ЗначениеПараметра>
	<Свойство Имя="ПометкаУдаления" Тип="Булево">
		<Значение>false</Значение>
	</Свойство>
	<Свойство Имя="Проведен" Тип="Булево">
		<Значение>true</Значение>
	</Свойство>
	<Свойство Имя="ВалютаДокумента" Тип="СправочникСсылка.Валюты"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>643</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
	<Свойство Имя="кд_СтатусЗаказа" Тип="ПеречислениеСсылка.кд_СтатусыЗаказов_МП">
		<Значение>Отменен</Значение>
	</Свойство><ТабличнаяЧасть Имя="Товары">
	<Запись>
		<Свойство Имя="КодСтроки" Тип="Число">
			<Значение>1</Значение>
		</Свойство>
		<Свойство Имя="Количество" Тип="Число">
			<Значение>1</Значение>
		</Свойство>
		<Свойство Имя="Номенклатура" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
		</Свойство>
		<Свойство Имя="ХарактеристикаНоменклатуры" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>00</Значение>
	</Свойство>
	<Свойство Имя="Владелец" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Ссылка>
		</Свойство>
		<Свойство Имя="Цена" Тип="Число">
			<Значение>6964</Значение>
		</Свойство>
	</Запись>
	<Запись>
		<Свойство Имя="КодСтроки" Тип="Число">
			<Значение>2</Значение>
		</Свойство>
		<Свойство Имя="Количество" Тип="Число">
			<Значение>1</Значение>
		</Свойство>
		<Свойство Имя="Номенклатура" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
		</Свойство>
		<Свойство Имя="ХарактеристикаНоменклатуры" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>00</Значение>
	</Свойство>
	<Свойство Имя="Владелец" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Ссылка>
		</Свойство>
		<Свойство Имя="Цена" Тип="Число">
			<Значение>6964</Значение>
		</Свойство>
	</Запись>
</ТабличнаяЧасть>
	<ЗначениеПараметра Имя="ЭтоWildberries" Тип="Булево">
		<Значение>true</Значение>
	</ЗначениеПараметра>
</Объект>
<Объект Нпп="11" Тип="РегистрСведенийЗапись.КД_МПВБ" ИмяПравила="КД_МПВБ_ЗаказПокупателя">
	<Свойство Имя="ЗаказПокупателя" Тип="ДокументСсылка.ЗаказПокупателя"><Ссылка>
	<Свойство Имя="{УникальныйИдентификатор}" Тип="Строка" ТипИсточника="ДокументСсылка.ЗаказКлиента" ТипПриемника="ДокументСсылка.ЗаказПокупателя">
		<Значение>d92a7e91-0712-11f1-8ceb-005056a0e358</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
	<Свойство Имя="КодСтроки" Тип="Число">
		<Значение>1</Значение>
	</Свойство>
	<Свойство Имя="СРИД" Тип="Строка">
		<Значение>ebL.f79e2e7d9b754d38bc98a5489f6607cb.0.0</Значение>
	</Свойство>
	<Свойство Имя="НомерСборочногоЗадания" Тип="Строка">
		<Значение>4612722947</Значение>
	</Свойство>
	<Свойство Имя="Стикер" Тип="Строка"/>
	<Свойство Имя="Номенклатура" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Объект>
<Объект Нпп="14" Тип="РегистрСведенийЗапись.КД_МПВБ" ИмяПравила="КД_МПВБ_ЗаказПокупателя">
	<Свойство Имя="ЗаказПокупателя" Тип="ДокументСсылка.ЗаказПокупателя"><Ссылка>
	<Свойство Имя="{УникальныйИдентификатор}" Тип="Строка" ТипИсточника="ДокументСсылка.ЗаказКлиента" ТипПриемника="ДокументСсылка.ЗаказПокупателя">
		<Значение>d92a7e91-0712-11f1-8ceb-005056a0e358</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
	<Свойство Имя="КодСтроки" Тип="Число">
		<Значение>2</Значение>
	</Свойство>
	<Свойство Имя="СРИД" Тип="Строка">
		<Значение>ebL.f79e2e7d9b754d38bc98a5489f6607cb.0.1</Значение>
	</Свойство>
	<Свойство Имя="НомерСборочногоЗадания" Тип="Строка">
		<Значение>4612722946</Значение>
	</Свойство>
	<Свойство Имя="Стикер" Тип="Строка"/>
	<Свойство Имя="Номенклатура" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Объект>
<Объект Нпп="17" Тип="ДокументСсылка.КорректировкаЗаказаПокупателя" ИмяПравила="КорректировкаЗаказаПокупателя"><Ссылка>
	<Свойство Имя="{УникальныйИдентификатор}" Тип="Строка" ТипИсточника="ДокументСсылка.ЗаказКлиента" ТипПриемника="ДокументСсылка.КорректировкаЗаказаПокупателя">
		<Значение>d99c0b56-0716-11f1-8ceb-005056a0e358</Значение>
	</Свойство>
	<Свойство Имя="ЗаказПокупателя" Тип="ДокументСсылка.ЗаказПокупателя"><Ссылка>
	<Свойство Имя="{УникальныйИдентификатор}" Тип="Строка" ТипИсточника="ДокументСсылка.ЗаказКлиента" ТипПриемника="ДокументСсылка.ЗаказПокупателя">
		<Значение>d92a7e91-0712-11f1-8ceb-005056a0e358</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Ссылка>
	<Свойство Имя="Комментарий" Тип="Строка">
		<Значение>
ИД Склада: 1666485
Номер по данным клиента: </Значение>
	</Свойство>
	<ЗначениеПараметра Имя="кд_интернетНомерСклада" Тип="Число">
		<Значение>227</Значение>
	</ЗначениеПараметра>
	<Свойство Имя="Проведен" Тип="Булево">
		<Значение>true</Значение>
	</Свойство><ТабличнаяЧасть Имя="Товары">
	<Запись>
		<Свойство Имя="КодСтроки" Тип="Число">
			<Значение>1</Значение>
		</Свойство>
		<Свойство Имя="Количество" Тип="Число">
			<Значение>-1</Значение>
		</Свойство>
		<Свойство Имя="Номенклатура" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
		</Свойство>
		<Свойство Имя="ХарактеристикаНоменклатуры" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>00</Значение>
	</Свойство>
	<Свойство Имя="Владелец" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Ссылка>
		</Свойство>
		<Свойство Имя="Цена" Тип="Число">
			<Значение>6964</Значение>
		</Свойство>
	</Запись>
	<Запись>
		<Свойство Имя="КодСтроки" Тип="Число">
			<Значение>2</Значение>
		</Свойство>
		<Свойство Имя="Количество" Тип="Число">
			<Значение>-1</Значение>
		</Свойство>
		<Свойство Имя="Номенклатура" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
		</Свойство>
		<Свойство Имя="ХарактеристикаНоменклатуры" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>00</Значение>
	</Свойство>
	<Свойство Имя="Владелец" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Ссылка>
		</Свойство>
		<Свойство Имя="Цена" Тип="Число">
			<Значение>6964</Значение>
		</Свойство>
	</Запись>
</ТабличнаяЧасть>
</Объект>
<Объект Нпп="25" Тип="РегистрСведенийЗапись.КД_МПВБ" ИмяПравила="КД_МПВБ_ЗаказПокупателя">
	<Свойство Имя="ЗаказПокупателя" Тип="ДокументСсылка.ЗаказПокупателя"><Ссылка>
	<Свойство Имя="{УникальныйИдентификатор}" Тип="Строка" ТипИсточника="ДокументСсылка.ЗаказКлиента" ТипПриемника="ДокументСсылка.ЗаказПокупателя">
		<Значение>d92a7e91-0712-11f1-8ceb-005056a0e358</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
	<Свойство Имя="КодСтроки" Тип="Число">
		<Значение>1</Значение>
	</Свойство>
	<Свойство Имя="СРИД" Тип="Строка">
		<Значение>ebL.f79e2e7d9b754d38bc98a5489f6607cb.0.0</Значение>
	</Свойство>
	<Свойство Имя="НомерСборочногоЗадания" Тип="Строка">
		<Значение>4612722947</Значение>
	</Свойство>
	<Свойство Имя="Стикер" Тип="Строка"/>
	<Свойство Имя="Номенклатура" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Объект>
<Объект Нпп="28" Тип="РегистрСведенийЗапись.КД_МПВБ" ИмяПравила="КД_МПВБ_ЗаказПокупателя">
	<Свойство Имя="ЗаказПокупателя" Тип="ДокументСсылка.ЗаказПокупателя"><Ссылка>
	<Свойство Имя="{УникальныйИдентификатор}" Тип="Строка" ТипИсточника="ДокументСсылка.ЗаказКлиента" ТипПриемника="ДокументСсылка.ЗаказПокупателя">
		<Значение>d92a7e91-0712-11f1-8ceb-005056a0e358</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
	<Свойство Имя="КодСтроки" Тип="Число">
		<Значение>2</Значение>
	</Свойство>
	<Свойство Имя="СРИД" Тип="Строка">
		<Значение>ebL.f79e2e7d9b754d38bc98a5489f6607cb.0.1</Значение>
	</Свойство>
	<Свойство Имя="НомерСборочногоЗадания" Тип="Строка">
		<Значение>4612722946</Значение>
	</Свойство>
	<Свойство Имя="Стикер" Тип="Строка"/>
	<Свойство Имя="Номенклатура" Тип="СправочникСсылка.Номенклатура" ИмяПКО="Номенклатура"><Ссылка НеСоздаватьЕслиНеНайден="true">
	<Свойство Имя="Код" Тип="Строка">
		<Значение>7006796</Значение>
	</Свойство>
</Ссылка>
	</Свойство>
</Объект>
</ФайлОбмена>
